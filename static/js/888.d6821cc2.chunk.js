!function(){"use strict";var e={4888:function(e,t,n){var i={};n.r(i),n.d(i,{FIVE_AXIS:function(){return oe},TRIVIAL:function(){return se}});var r={};n.r(r),n.d(r,{ABSOLUTE:function(){return Ae},ABSOLUTE_ARC:function(){return Pe},INCREMENTAL:function(){return _e},INCREMENTAL_ARC:function(){return Oe}});var a={};n.r(a),n.d(a,{INVERSE_TIME:function(){return Ce},UNITS_PER_MINUTE:function(){return Le},UNITS_PER_REVOLUTION:function(){return je}});var o={};n.r(o),n.d(o,{UV:function(){return Be},VW:function(){return Ue},WU:function(){return De},XY:function(){return we},YZ:function(){return ke},ZX:function(){return Ne}});var s={};n.r(s),n.d(s,{IN:function(){return Xe},MM:function(){return Fe}});var l={};n.r(l),n.d(l,{OFF:function(){return Ye}});var u={};n.r(u),n.d(u,{Machine:function(){return Ot},computeDynamicWorkOffsets:function(){return Et},forwardFiveAxis:function(){return It},getLimitErrors:function(){return _t},inverseFiveAxis:function(){return bt},jointLabels:function(){return At},kinematics:function(){return Gt},limits:function(){return Rt},name:function(){return Pt},toolLength:function(){return Zt},toolOrientation:function(){return xt},workPieceSpace:function(){return Tt}});var c={};n.r(c),n.d(c,{Machine:function(){return Wt},computeDynamicWorkOffsets:function(){return jt},forwardFiveAxis:function(){return kt},getLimitErrors:function(){return Ft},inverseFiveAxis:function(){return Bt},jointLabels:function(){return Xt},kinematics:function(){return Dt},limits:function(){return Ut},name:function(){return Yt},toolLength:function(){return Lt},toolOrientation:function(){return wt},workPieceSpace:function(){return Nt}});var m={};n.r(m),n.d(m,{Machine:function(){return on},computeDynamicWorkOffsets:function(){return Kt},forwardFiveAxis:function(){return Qt},getLimitErrors:function(){return rn},inverseFiveAxis:function(){return $t},isSuperSecret:function(){return Vt},jointLabels:function(){return nn},kinematics:function(){return en},limits:function(){return tn},name:function(){return an},toolLength:function(){return zt},toolOrientation:function(){return qt},workPieceSpace:function(){return Jt}});var h={};n.r(h),n.d(h,{Machine:function(){return yn},computeDynamicWorkOffsets:function(){return un},forwardFiveAxis:function(){return hn},getLimitErrors:function(){return Mn},inverseFiveAxis:function(){return dn},jointLabels:function(){return vn},kinematics:function(){return fn},limits:function(){return pn},name:function(){return gn},toolLength:function(){return ln},toolOrientation:function(){return cn},workPieceSpace:function(){return mn}});var d={};n.r(d),n.d(d,{Machine:function(){return Dn},computeDynamicWorkOffsets:function(){return _n},forwardFiveAxis:function(){return Cn},getLimitErrors:function(){return kn},inverseFiveAxis:function(){return Ln},jointLabels:function(){return Nn},kinematics:function(){return jn},limits:function(){return wn},name:function(){return Bn},toolLength:function(){return An},toolOrientation:function(){return Pn},workPieceSpace:function(){return On}});var f={};n.r(f),n.d(f,{annotations:function(){return Oi},firstSetWorkCoordinateSystemMessage:function(){return Xi},lastSetUnitsMessage:function(){return Bi},maxLimitMessage:function(){return Ci},messages:function(){return Pi},minLimitMessage:function(){return Li},nonSummarizedErrors:function(){return wi},nonSummarizedWarnings:function(){return Ni},setToolLengthOffsetMessages:function(){return Di},setUnitsMessages:function(){return ki},setWorkCoordinateSystemMessages:function(){return Ui},unimplementedMessages:function(){return ji},wcsChangedMessages:function(){return Fi}});var p,v=n(5861),M=n(9439),g=n(7762),y=n(4165),S=n(6296),Z=n(6420),E=n(608),x=n(4942),T=n(1413),I=n(5278),b=(0,I.dA)({INTERPRETER:{SET_FILE_NAME:void 0,START_PROCESSING:void 0,END_PROCESSING:void 0,SET_PROCESSING_PROGRESS:void 0,SET_CURRENT_LINE_AND_TIME_NO_UPDATES:void 0,SET_APPROXIMATE_TIME:void 0,SET_NUM_LINES:void 0,SET_INITIAL_STATE:void 0,APPEND_MESSAGES:void 0,INCREMENT_TIME:void 0,SET_CURRENT_LINE_WITH_PERCENTAGE:void 0,SET_CURRENT_LINE_WITH_PERCENTAGE_LINE_BOUNDED:void 0,SET_CURRENT_LINE_WITH_TIME:void 0,SET_CURRENT_LINE:void 0,NEXT_LINE:void 0,PREVIOUS_LINE:void 0,PAUSE:void 0,UNPAUSE:void 0,RUN:void 0,RUN_REPLACE_SELECTION_WITH_TCPC:void 0,STOP:void 0,SET_TIME_MULTIPLIER:void 0}}),G=300,R=1e5,A=((0,I.jZ)((p={},(0,x.Z)(p,b.interpreter.setApproximateTime,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{approximateTime:t.payload})})),(0,x.Z)(p,b.interpreter.setNumLines,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{numLines:t.payload})})),(0,x.Z)(p,b.interpreter.setInitialState,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{initialState:t.payload})})),(0,x.Z)(p,b.interpreter.setFileName,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{fileName:t.payload})})),(0,x.Z)(p,b.interpreter.startProcessing,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{processingProgress:0,paused:!0,running:!0,processing:!0,messages:[]})})),(0,x.Z)(p,b.interpreter.endProcessing,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{processing:!1})})),(0,x.Z)(p,b.interpreter.setProcessingProgress,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{processingProgress:t.payload})})),(0,x.Z)(p,b.interpreter.pause,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),(0,x.Z)(p,b.interpreter.stop,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{running:!1})})),(0,x.Z)(p,b.interpreter.unpause,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!1})})),(0,x.Z)(p,b.interpreter.run,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{running:!0,currentLine:0,currentTime:0})})),(0,x.Z)(p,b.interpreter.setTimeMultiplier,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{timeMultiplier:t.payload})})),(0,x.Z)(p,b.interpreter.setCurrentLineAndTimeNoUpdates,(function(e,t){var n=t.payload,i=n.currentLine,r=n.currentTime;return(0,T.Z)((0,T.Z)({},e),{},{currentLine:i,currentTime:r})})),(0,x.Z)(p,b.interpreter.appendMessages,(function(e,t){for(var n=[],i=0;i<e.messages.length;i++)n.push(e.messages[i]);for(var r=0;r<t.payload.length;r++)n.push(t.payload[r]);return(0,T.Z)((0,T.Z)({},e),{},{messages:n})})),(0,x.Z)(p,b.interpreter.incrementTime,(function(e,t){var n=e.currentTime,i=e.timeMultiplier,r=e.approximateTime;return n+t.payload*i>r?(0,T.Z)((0,T.Z)({},e),{},{paused:!0}):e})),(0,x.Z)(p,b.interpreter.nextLine,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),(0,x.Z)(p,b.interpreter.previousLine,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),(0,x.Z)(p,b.interpreter.setCurrentLineWithPercentage,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),(0,x.Z)(p,b.interpreter.setCurrentLineWithPercentageLineBounded,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),(0,x.Z)(p,b.interpreter.setCurrentLineWithTime,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),(0,x.Z)(p,b.interpreter.setCurrentLine,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{paused:!0})})),p),{messages:[],initialState:{},approximateTime:0,fileName:"sim.ngc",numLines:0,loading:!1,loadingProgress:0,processing:!1,processingProgress:0,currentLine:0,currentTime:0,paused:!0,running:!1,timeMultiplier:1}),n(3433)),_=n(3144),P=n(5671),O={G4:0,G10:0,G28:0,G30:0,G53:0,G92:0,"G92.1":0,"G92.2":0,"G92.3":0,G0:1,G1:1,G2:1,G3:1,"G6.2":1,G33:1,"G38.2":1,G73:1,G76:1,G81:1,G82:1,G83:1,G84:1,G85:1,G86:1,G87:1,G88:1,G89:1,G17:2,G18:2,G19:2,"G17.1":2,"G18.1":2,"G19.1":2,G90:3,G91:3,"G90.1":4,"G91.1":4,G93:5,G94:5,G95:5,G20:6,G21:6,G40:7,G41:7,G42:7,"G41.1":7,"G42.1":7,G43:8,"G43.1":8,G49:8,G98:10,G99:10,G54:12,G55:12,G56:12,G57:12,G58:12,G59:12,"G59.1":12,"G59.2":12,"G59.3":12,G61:13,"G61.1":13,G664:13,G96:14,G97:14,G7:15,G8:15,M0:4,M1:4,M2:4,M30:4,M60:4,M3:7,M4:7,M5:7,M7:8,M8:8,M9:8,M48:9,M49:9},C={G10:!0,G92:!0,G0:!0,G1:!0,G2:!0,G3:!0,"G6.2":!0,G33:!0,"G38.2":!0,G73:!0,G76:!0,G81:!0,G82:!0,G83:!0,G84:!0,G85:!0,G86:!0,G87:!0,G88:!0,G89:!0,"G43.1":!0},L=(0,I.dA)({MACHINE_STATE:{DISTANCE_MODE:{SET_ABSOLUTE:void 0,SET_INCREMENTAL:void 0,SET_ABSOLUTE_ARC:void 0,SET_INCREMENTAL_ARC:void 0}}}),j=(0,I.dA)({MACHINE_STATE:{FEED_RATE_MODE:{SET_INVERSE_TIME:void 0,SET_UNITS_PER_MINUTE:void 0,SET_UNITS_PER_REVOLUTION:void 0}}}),w=(0,I.dA)({MACHINE_STATE:{FEED_RATE:{SET:function(e){return e}}}}),N=(0,I.dA)({MACHINE_STATE:{UNITS:{SET_IN:void 0,SET_MM:void 0}}}),k=(0,I.dA)({MACHINE_STATE:{KINEMATICS_MODE:{SET_FIVE_AXIS:void 0,SET_TRIVIAL:void 0}}}),B=(0,I.dA)({MACHINE_STATE:{CUTTER_COMPENSATION:{OFF:void 0}}}),D=(0,I.dA)({MACHINE_STATE:{MOTION:{OFF:void 0,RAPID:void 0,LINEAR:void 0,ARC_C_W:void 0,ARC_C_C_W:void 0,LOCAL_MOVE:void 0,SET_POSITION:void 0,NON_MOTION_COMMAND:void 0,G5X:{ENABLE_G54:void 0,ENABLE_G55:void 0,ENABLE_G56:void 0,ENABLE_G57:void 0,ENABLE_G58:void 0,ENABLE_G59:void 0,ENABLE_G59_1:void 0,ENABLE_G59_2:void 0,ENABLE_G59_3:void 0,COMPUTE_DYNAMIC_WORK_OFFSETS:void 0,SET_G5X_WORK_OFFSET:void 0},RESET_ROTARY:void 0}}}),U=(0,I.dA)({MACHINE_STATE:{PLANE_SELECT:{SET_X_Y:void 0,SET_Z_X:void 0,SET_Y_Z:void 0,SET_U_V:void 0,SET_W_U:void 0,SET_V_W:void 0}}}),X=(0,I.dA)({MACHINE_STATE:{SPINDLE_CONTROL:{OFF:void 0,CW:void 0,CCW:void 0}}}),F=(0,I.dA)({MACHINE_STATE:{SPINDLE_SPEED:{SET:void 0}}}),Y=(0,I.dA)({MACHINE_STATE:{TOOL:{SET:void 0,CHANGE:void 0,SET_TOOL_LENGTH_OFFSET:void 0,CLEAR_TOOL_LENGTH_OFFSET:void 0,TABLE:{SET_TOOL:void 0}}}}),W=(0,I.dA)({MACHINE_STATE:{MACHINE:{SET:void 0}}}),H={machineState:(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},L.machineState),j.machineState),w.machineState),k.machineState),U.machineState),N.machineState),B.machineState),D.machineState),X.machineState),F.machineState),Y.machineState),W.machineState),(0,I.dA)({MACHINE_STATE:{SET:void 0}}).machineState)},V={G4:!0,G5:!0,"G5.1":!0,"G5.2":!0,"G5.3":!0,G7:!0,G8:!0,G10:!0,"G17.1":!0,"G18.1":!0,"G19.1":!0,G28:!0,"G28.1":!0,G30:!0,"G30.1":!0,G33:!0,"G33.1":!0,"G38.2":!0,"G38.3":!0,"G38.4":!0,"G38.5":!0,G41:!0,G42:!0,"G41.1":!0,"G42.1":!0,"G43.1":!0,"G43.2":!0,G61:!0,"G61.1":!0,G64:!0,G73:!0,G76:!0,G80:!0,G81:!0,G82:!0,G83:!0,G84:!0,G85:!0,G86:!0,G87:!0,G88:!0,G89:!0,G92:!0,"G92.1":!0,"G92.2":!0,"G92.3":!0,G95:!0,G96:!0,G97:!0,G98:!0,G99:!0,M0:!0,M1:!0,M2:!0,M30:!0,M7:!0,M8:!0,M9:!0,M19:!0,M48:!0,M49:!0,M50:!0,M51:!0,M52:!0,M53:!0,M61:!0,M62:!0,M63:!0,M64:!0,M65:!0,M66:!0,M67:!0,M68:!0,M70:!0,M71:!0,M72:!0,M73:!0,M700:!0},z={G0:"Move at machine's maximum speed.",G1:"Move at the current feed rate.",G2:"Make a clockwise arc move.",G3:"Make a counter-clockwise arc move.",G4:"Dwell in place.",G5:"Make a cubic spline move.","G5.1":"Make a quadratic spline move.","G5.2":"Make a NURBS move.","G5.3":"Make a NURBS move.","G6.2":"Move to local coordinates, but constrained to specific physical axes of movement.",G80:"Cancel canned cycle.",G17:"Select XY plane.",G18:"Select XZ plane.",G19:"Select YZ plane.",G40:"Turn off cutter compensation.",G43:"Enable tool length offset.",G49:"Disable tool length offset.",G90:"Set absolute distance mode.",G91:"Set incremental distance mode.","G90.1":"Set absolute arc distance mode.","G91.1":"Set incremental arc distance mode.",G93:"Set inverse time feed rate mode.",G94:"Set units per minute feed rate mode.",G7:"Enable lathe diameter mode.",G8:"Enable lathe radius mode.",G10:"Set tool table and coordinate system.","G17.1":"Select UV plane.","G18.1":"Select WU plane.","G19.1":"Select VW plane.",G28:"Go to predefined absolute position stored in parameters 5161-5166.","G28.1":"Store current position in parameters 5161-5166",G30:"Go to predefined absolute position stored in parameters 5181-5186.","G30.1":"Store current position in parameters 5181-5186.",G33:"Spindle synchronized motion.","G33.1":"Rigid tapping.","G38.2":"Probe toward workpiece, stop on contact, signal error if failure. Implemented to behave like G1.","G38.3":"Probe toward workpiece, stop on contact. Implemented to behave like G1.","G38.4":"Probe away from workpiece, stop on loss of contact, signal error if failure. Implemented to behave like G1.","G38.5":"Probe away from workpiece, stop on loss of contact. Implemented to behave like G1.",G41:"Enable cutter compensation left of programmed path.",G42:"Enable cutter compensation right of programmed path.","G41.1":"Enable cutter compensation left of programmed path with tool diameter.","G42.1":"Enable cutter compensation right of programmed path with tool diameter.","G43.1":"Dynamic tool length offset.","G43.2":"Apply additional tool length offset.",G54:"Select coordinate system 1 (the default).",G55:"Select coordinate system 2.",G56:"Select coordinate system 3.",G57:"Select coordinate system 4.",G58:"Select coordinate system 5.",G59:"Select coordinate system 6.","G59.1":"Select coordinate system 7.","G59.2":"Select coordinate system 8.","G59.3":"Select coordinate system 9.",G61:"Enable exact path mode.","G61.1":"Enable exact path mode.",G64:"Set path blending parameters.",G73:"Drilling cycle with chip breaking.",G76:"Threading cycle.",G81:"Drilling cycle.",G82:"Drilling cycle, dwell.",G83:"Peck drilling cycle.",G84:"Right-hand tapping cycle.",G85:"Boring cycle, feed out.",G86:"Boring cycle, spindle stop, rapid move out.",G87:"Back boring cycle.",G88:"Boring cycle, spindle stop, manual out.",G89:"Boring cycle, dwell, feed out.",G92:"Offsets the coordinate system by setting the current point to the axis numbers you want and stores the offsets in parameters 5211-5219.","G92.1":"Reset G92 offsets to zero and sets parameters 5211-5219 to zero.","G92.2":"Reset G92 offsets to zero.","G92.3":"Set the G92 offsets to the values saved in parameters 5211-5219.",G95:"Set units per revolution feed rate mode.",G96:"Spindle control mode, constant surface speed.",G97:"Spindle control mode, RPM mode.",G98:"Retract to the position that axis was in just before this series of one or more contiguous canned cycles was started.",G99:"Retract to the position specified by the R word of the canned cycle.",M3:"Turn on spindle going clockwise.",M4:"Turn on spindle going counter-clockwise.",M5:"Turn off spindle.",M6:"Change tool.",M0:"Pause program.",M1:"Pause program if optional stop switch is on.",M2:"End the program. Pressing cycle start will start the program at the beginning of the file.",M30:"End the program. Pressing cycle start will start the program at the beginning of the file.",M7:"Turn mist coolant on.",M8:"Turn flood coolant on.",M9:"Turn both mist and flood coolant off.",M19:"Orient spindle.",M48:"Enable speed and feed rate override controls.",M49:"Disable spindle speed and feed rate override controls.",M50:"Feed override control.",M51:"Spindle speed override control.",M52:"Use adaptive feed.",M53:"Enable feed stop switch.",M61:"Change the current tool number while in MDI or Manual mode.",M62:"Turn on digital output synchronized with motion.",M63:"Turn on digital output synchronized with motion.",M64:"Turn on digital output immediately.",M65:"Turn on digital output immediately.",M66:"Wait on digital input.",M67:"Set an analog output synchronized with motion.",M68:"Set an analog output immediately.",M70:"Save modal state.",M71:"Invalidate saved modal state.",M72:"Restore modal state.",M73:"Save modal state with a subroutine and restore state on subroutine endsub or any return path.",M254:"Rotate the current work offset by the current tilt angle and store the results in the specified work offsets.",M428:"Enable TCPC.",M429:"Disable TCPC.",M700:"Display messages to user in Kinetic Control.",M999:"Set rotary position to +/- a multiple of 360 degrees to set it closest to a desired angle provided in the P argument without physically moving the axis."},K={G0:H.machineState.motion.rapid,G1:H.machineState.motion.linear,G2:H.machineState.motion.arcCW,G3:H.machineState.motion.arcCCW,"G6.2":H.machineState.motion.localMove,"G38.2":H.machineState.motion.linear,"G38.3":H.machineState.motion.linear,"G38.4":H.machineState.motion.linear,"G38.5":H.machineState.motion.linear,G17:H.machineState.planeSelect.setXY,G18:H.machineState.planeSelect.setZX,G19:H.machineState.planeSelect.setYZ,G40:H.machineState.cutterCompensation.off,G43:H.machineState.tool.setToolLengthOffset,G49:H.machineState.tool.clearToolLengthOffset,G54:H.machineState.motion.g5x.enableG54,G55:H.machineState.motion.g5x.enableG55,G56:H.machineState.motion.g5x.enableG56,G57:H.machineState.motion.g5x.enableG57,G58:H.machineState.motion.g5x.enableG58,G59:H.machineState.motion.g5x.enableG59,"G59.1":H.machineState.motion.g5x.enableG591,"G59.2":H.machineState.motion.g5x.enableG592,"G59.3":H.machineState.motion.g5x.enableG593,G90:H.machineState.distanceMode.setAbsolute,G91:H.machineState.distanceMode.setIncremental,"G90.1":H.machineState.distanceMode.setAbsoluteArc,"G91.1":H.machineState.distanceMode.setIncrementalArc,G93:H.machineState.feedRateMode.setInverseTime,G94:H.machineState.feedRateMode.setUnitsPerMinute,M3:H.machineState.spindleControl.cw,M4:H.machineState.spindleControl.ccw,M5:H.machineState.spindleControl.off,M6:H.machineState.tool.change,M254:H.machineState.motion.g5x.computeDynamicWorkOffsets,M428:H.machineState.kinematicsMode.setFiveAxis,M429:H.machineState.kinematicsMode.setTrivial,M999:H.machineState.motion.resetRotary},q={G20:H.machineState.units.setIn,G21:H.machineState.units.setMm},J={T:H.machineState.tool.set,S:H.machineState.spindleSpeed.set,F:H.machineState.feedRate.set},Q={G53:!0},$={G54:!0,G55:!0,G56:!0,G57:!0,G58:!0,G59:!0,"G59.1":!0,"G59.2":!0,"G59.3":!0},ee=H.machineState.motion.setPosition,te="OFF",ne="RAPID",ie="LINEAR",re="ARC_CW",ae="ARC_CCW",oe="FIVE_AXIS",se="TRIVIAL",le="error",ue="warning",ce="info",me="UNIMPLEMENTED",he="MINIMUM_LIMIT",de="MAXIMUM_LIMIT",fe="INVERSE_TIME_REQUIRES_FEED_RATE",pe="SET_TOOL_LENGTH_OFFSET",ve="SET_WORK_COORDINATE_SYSTEM",Me="COMPUTED_DYNAMIC_WORK_OFFSETS",ge="SET_UNITS";function ye(e,t){return{message:"Radius to end of arc differs from radius to start: radius start = ".concat(e,", radius end = ").concat(t,", difference = ").concat(e-t),type:"RADIUS_DIFFERS",severity:le}}function Se(e){return{message:"Can't set tool number to non integer value: "+e,type:"NON_INTEGER_TOOL_NUMBER",severity:le}}function Ze(){return{message:"Tool number must be less than or equal to 55. ",type:"LARGE_TOOL_NUMBER",severity:le}}function Ee(e,t){return{message:"Can't run multiple commands in the same modal group on the same line. Codes "+e.slice(0,e.length-1).join(", ")+" and "+e[e.length-1]+" are in modal group "+t+".",codes:e,group:t,type:"MULTIPLE_COMMANDS_IN_MODAL_GROUP",severity:le}}function xe(e,t){return{message:e+" axis exceeded minimum limit by "+t.toFixed(4)+".",axis:e,amount:t,type:he,severity:le}}function Te(e,t){return{message:e+" axis exceeded maximum limit by "+t.toFixed(4)+".",axis:e,amount:t,type:de,severity:le}}function Ie(e){var t=function(e){return z[e]}(e);return{message:"Ignoring "+e+" as it is currently unimplemented in the simulator. Intended usage: "+t,description:t,severity:ue,type:me,code:e}}var be={1:"G54",2:"G55",3:"G56",4:"G57",5:"G58",6:"G59",7:"G59.1",8:"G59.2",9:"G59.3"};var Ge={G20:"inches",G21:"millimeters"};function Re(e,t){return(0,T.Z)((0,T.Z)({},e),{},{line:t})}var Ae="ABSOLUTE",_e="INCREMENTAL",Pe="ABSOLUTE_ARC",Oe="INCREMENTAL_ARC",Ce="INVERSE_TIME",Le="UNITS_PER_MINUTE",je="UNITS_PER_REVOLUTION",we="XY",Ne="ZX",ke="YZ",Be="UV",De="WU",Ue="VW",Xe="IN",Fe="MM",Ye="OFF",We=1e-6,He=n(5987),Ve=n(2791),ze=n(9062),Ke=n(4315),qe=n(574),Je=n(5807),Qe=n(1120),$e=n(136),et=n(9388),tt=n(7760),nt=function(e){(0,$e.Z)(n,e);var t=(0,et.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;return(0,P.Z)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.orthographicMatrix=new tt.Matrix4,e.perspectiveMatrix=new tt.Matrix4,e.orthographicMatrixInverse=new tt.Matrix4,e.perspectiveMatrixInverse=new tt.Matrix4,e.focusDistance=1e3,e.blend=0,e.blendPower=1e3,e.updateProjectionMatrix(),e}return(0,_.Z)(n,[{key:"copy",value:function(e,t){return(0,Je.Z)((0,Qe.Z)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*tt.MathUtils.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*tt.MathUtils.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*tt.MathUtils.RAD2DEG*Math.atan(Math.tan(.5*tt.MathUtils.DEG2RAD*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*tt.MathUtils.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.perspectiveMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.perspectiveMatrixInverse.copy(this.perspectiveMatrix).invert(),this.projectionMatrix.copy(this.perspectiveMatrix);var u=this.focusDistance*Math.tan(.5*tt.MathUtils.DEG2RAD*this.fov)/this.zoom,c=2*u,m=this.aspect*c,h=-.5*m;this.orthographicMatrix.makeOrthographic(h,h+m,u,u-c,this.near,this.far),this.orthographicMatrixInverse.copy(this.orthographicMatrix).invert();for(var d=0;d<16;d++){var f=Math.pow(this.blend,1/this.blendPower);this.projectionMatrix.elements[d]=this.projectionMatrix.elements[d]*(1-f)+this.orthographicMatrix.elements[d]*f}this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,Je.Z)((0,Qe.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},{key:"setPerspective",value:function(){this.isPerspective=!0}},{key:"setOrthographic",value:function(){this.isPerspective=!1}},{key:"isPerspectiveCamera",get:function(){return this.isPerspective}},{key:"isOrthographicCamera",get:function(){return!this.isPerspective}}]),n}(tt.Camera);nt.prototype.isBlendPerspectiveOrthographicCamera=!0;var it=n(184);(0,ze.e)({BlendPerspectiveOrthographicCamera:nt});var rt=n(5028),at=n.n(rt),ot=1e-6,st=function(e){return e.radius},lt=function(e){return e.addParent},ut=function(e){return e.removeParent},ct=function(e){return e.setUpAndForward},mt=(0,qe.Ue)((function(e){return{activeParent:null,parents:[],theta:-45*Math.PI/180,phi:45*Math.PI/180,orthographic:!1,radius:10,excessR:0,upAndForwardOrientation:new tt.Quaternion,localOrientationObjects:[],blendPower:1e3,blend:0,auto:!0,filter:.1,setUpAndForward:function(t,n){return e((function(e){var i=new tt.Vector3;i.crossVectors(n,t);var r=new tt.Matrix4;r.set(i.x,i.y,i.z,0,t.x,t.y,t.z,0,-n.x,-n.y,-n.z,0,0,0,0,1);var a=new tt.Quaternion;return a.setFromRotationMatrix(r),a.conjugate(),{upAndForwardOrientation:a}}))},setFilter:function(t){return e((function(e){return{filter:t}}))},setActiveParent:function(t){return e((function(e){return{activeParent:t}}))},addLocalOrientationObject:function(t){return e((function(e){return{localOrientationObjects:[].concat((0,A.Z)(e.localOrientationObjects),[t])}}))},removeLocalOrientationObject:function(t){return e((function(e){var n=e.localOrientationObjects.indexOf(t);if(n>-1){var i=(0,A.Z)(e.localOrientationObjects);return i.splice(n,1),{localOrientationObjects:i}}return{}}))},addParent:function(t){return e((function(e){return{parents:[].concat((0,A.Z)(e.parents),[t])}}))},removeParent:function(t){return e((function(e){var n=e.parents.indexOf(t);if(n>-1){var i=(0,A.Z)(e.parents);return i.splice(n,1),{parents:i}}return{parents:e.parents}}))},setCameraOrientation:function(t,n){return e((function(e){return{phi:Math.max(ot,Math.min(Math.PI-ot,n)),theta:t}}))},rotateCamera:function(t,n){return e((function(e){return{phi:Math.max(ot,Math.min(Math.PI-ot,e.phi+n)),theta:e.theta+t}}))},zoomCamera:function(t){return e((function(e){var n=e.radius;t<0?n*=.95:t>0&&(n/=.95);var i=n-Math.min(100,Math.max(.1,n));return{radius:Math.min(100,Math.max(.1,n)),excessR:i}}))},setRadius:function(t){return e((function(e){return{radius:Math.min(100,Math.max(.1,t))}}))},setPerspective:function(){return e((function(e){return{blend:0,blendPower:1.5*e.radius,auto:!1}}))},setOrthographic:function(){return e((function(e){return{blend:1,blendPower:.4*e.radius,auto:!1}}))},setAuto:function(){return e((function(e){return{auto:!0}}))},alignWithDirection:function(t,n,i){return e((function(e){var r=Math.sqrt(t*t+n*n+i*i),a=0,o=0;return 0!==r&&(o=Math.atan2(t,i),a=Math.acos(Math.max(Math.min(n/r,1),-1))),(a<=ot||a>=Math.PI-ot)&&(o=e.theta),{phi:a,theta:o}}))}}})),ht=new tt.Vector3(1,0,0),dt=new tt.Vector3(0,1,0),ft=new tt.Vector3(0,0,1),pt=(new tt.Vector3(-1,0,0),new tt.Vector3(0,-1,0),new tt.Vector3(0,0,-1),new tt.Vector3(1,0,0),new tt.Vector3(0,0,1),new tt.Quaternion,new tt.Quaternion,new tt.Quaternion,new tt.Vector3,new tt.Quaternion,new tt.Quaternion,new tt.Vector3,function(){function e(){(0,P.Z)(this,e),this.startTime=at()()}return(0,_.Z)(e,[{key:"offsetStart",value:function(e){this.startTime+=e}},{key:"getElapsedTime",value:function(){return at()()-this.startTime}}]),e}());var vt="V2",Mt="V2_50",gt="V1",yt="SOLO",St=["joints","tool","toolHolder","spindleAngle","model","modelOffsets","children"];var Zt=function(e){return 6.26+e},Et=function(e,t){var n=bt(e,0),i=bt({X:n[0],Y:n[1],Z:n[2],A:t.A,B:t.B},0);return{X:i[0],Y:i[1],Z:i[2],A:0,B:0}},xt=function(e){var t=e[3],n=e[4],i=t*Math.PI/180,r=n*Math.PI/180,a=Math.cos(i),o=Math.sin(i),s=Math.cos(r);return{X:-Math.sin(r)*a,Y:o,Z:s*a}},Tt=function(e,t){return It(e,t)},It=function(e,t){var n=e[3],i=e[4],r=n*Math.PI/180,a=i*Math.PI/180,o=Math.cos(r),s=Math.sin(r),l=Math.cos(a),u=Math.sin(a),c=t,m=e[0],h=e[1],d=e[2];return{X:m*l+h*u*s-(d-c)*u*o,Y:h*o+(d-c)*s,Z:m*u-h*l*s+(d-c)*l*o,A:n,B:i,C:0}},bt=function(e,t){var n=e.A,i=e.B,r=n*Math.PI/180,a=i*Math.PI/180,o=Math.cos(r),s=Math.sin(r),l=Math.cos(a),u=Math.sin(a),c=t,m=e.X,h=e.Y,d=e.Z;return[m*l+d*u,m*u*s+h*o-d*l*s,-m*u*o+h*s+d*l*o+c,n,i]},Gt={inverseKinematics:function(e,t){var n=e.kinematicsMode,i=0;t||(i=e.tool.toolLengthOffset.Z);var r=e.motion.position;return n===oe?bt(r,i):[r.X,r.Y,r.Z+i,r.A,r.B]},forwardKinematics:function(e,t){var n=e.kinematicsMode,i=t?0:e.tool.toolLengthOffset.Z,r=e.joints;return n===oe?It(r,i):{X:r[0],Y:r[1],Z:r[2]-i,A:r[3],B:r[4],C:0}}},Rt={extents:{max:[2.55,2.55,.1,135,9999],min:[-2,-2.5,-3.45,-25,-9999]},velocities:[1,1,1,37.5,37.5],accelerations:[10,10,10,300,300]},At=["X","Y","Z","A","B"],_t=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];r<t.extents.min[i]-We?n.push(xe(At[i],Math.abs(r-t.extents.min[i]))):r>t.extents.max[i]+We&&n.push(Te(At[i],Math.abs(r-t.extents.max[i])))}return n.length>0?n:[]},Pt="V2-10",Ot=function(e){var t=e.joints,n=void 0===t?[0,0,0,0,0]:t,i=e.tool,r=void 0===i?null:i,a=e.toolHolder,o=void 0===a?"NONE":a,s=e.spindleAngle,l=void 0===s?0:s,u=e.model,c=void 0===u?null:u,m=e.modelOffsets,h=void 0===m?{X:0,Y:0,Z:0,A:0,B:0,C:0}:m,d=e.children,f=(0,He.Z)(e,St),p=(0,Ve.useRef)(),v=(0,Ke.L)("/gltf/v2-10.glb"),M=v.nodes,g=v.materials,y=(0,ze.z)().scene,S=(0,Ve.useRef)(),Z=(0,Ve.useRef)(),E=(0,Ve.useRef)(),x=(0,Ve.useRef)(),I=(0,Ve.useRef)(),b=mt(lt),G=mt(ut),R=mt(ct),A=(0,Ve.useMemo)((function(){return n.map((function(e,t){return Fn(vt,t,e)?0:11141120}))}),[n]),_=M[o]?(0,it.jsx)("primitive",{object:M[o],"rotation-z":l}):null;return(0,Ve.useEffect)((function(){g.BaseMaterial.envMap=y.environment,g.BaseMaterial.envMapIntensity=3,g.ColletMaterial.envMap=y.environment,g.ColletMaterial.envMapIntensity=3,g["ColletMaterial.001"].envMap=y.environment,g["ColletMaterial.001"].envMapIntensity=3,g.BackingPlateMaterial.envMap=y.environment,g.BackingPlateMaterial.envMapIntensity=3,g.TrunnionMaterial.envMap=y.environment,g.TrunnionMaterial.envMapIntensity=3,g.TableMaterial.envMap=y.environment,g.TableMaterial.envMapIntensity=3,g.SpindleMaterial.envMap=y.environment,g.SpindleMaterial.envMapIntensity=3,g.XMaterial.envMap=y.environment,g.XMaterial.envMapIntensity=3,g.ButtonsMaterial.envMap=y.environment,g.ButtonsMaterial.envMapIntensity=1.25,g.RailsMaterial.envMap=y.environment,g.RailsMaterial.envMapIntensity=1.25;var e={name:"Base",object:S.current},t={name:"Spindle",object:Z.current},n={name:"Table",object:E.current},i={name:"Part",object:I.current},r={name:"Trunnion",object:x.current};return b(e),b(t),b(n),b(r),b(i),R(dt,ht),function(){G(e),G(t),G(n),G(r),G(i)}}),[b,g,G,R,y]),(0,it.jsx)("group",(0,T.Z)((0,T.Z)({ref:p},f),{},{dispose:null,children:(0,it.jsxs)("group",{ref:S,children:[(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[-30,30,30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[-30,30,-30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.05,angle:Math.PI/8,penumbra:.15,decay:2,position:[30,30,30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.05,angle:Math.PI/8,penumbra:.15,decay:2,position:[30,30,-30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.02,angle:Math.PI/8,penumbra:.15,decay:2,position:[30,-30,-30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("mesh",{geometry:M.Base_1.geometry,material:g.BaseMaterial}),(0,it.jsx)("mesh",{geometry:M.Base_2.geometry,material:g.RailsMaterial}),(0,it.jsx)("mesh",{geometry:M.buttons.geometry,material:g.ButtonsMaterial}),(0,it.jsx)("mesh",{geometry:M.cycle_start_led.geometry,material:g["None.002"]}),(0,it.jsx)("mesh",{geometry:M.estop_led.geometry,material:g["None.001"]}),(0,it.jsxs)("group",{"position-x":n[0],children:[(0,it.jsx)("mesh",{geometry:M.x_1.geometry,material:g.XMaterial,"material-emissive":A[0]}),(0,it.jsx)("mesh",{geometry:M.x_2.geometry,material:g.ZRailMaterial}),(0,it.jsxs)("mesh",{geometry:M.z.geometry,material:g.SpindleMaterial,ref:Z,"position-z":6.26+n[2],"material-emissive":A[2],children:[r,_]})]}),(0,it.jsx)("mesh",{geometry:M.y.geometry,material:g.BackingPlateMaterial,"position-y":-n[1],"material-emissive":A[1],children:(0,it.jsx)("mesh",{geometry:M.a.geometry,material:g.TrunnionMaterial,ref:x,"rotation-x":n[3]*Math.PI/180,"material-emissive":A[3],children:(0,it.jsxs)("mesh",{geometry:M.b.geometry,material:g.TableMaterial,ref:E,"rotation-y":n[4]*Math.PI/180,"material-emissive":A[4],children:[(0,it.jsxs)("group",{position:[h.X,h.Y,h.Z],"rotation-x":h.A*Math.PI/180,"rotation-y":h.B*Math.PI/180,children:[(0,it.jsx)("group",{ref:I}),c]}),d]})})})]})}))},Ct=["joints","tool","model","modelOffsets","children"];var Lt=Zt,jt=Et,wt=xt,Nt=Tt,kt=It,Bt=bt,Dt=Gt,Ut={extents:{max:[2.55,2.55,0,135,9999],min:[-2,-2.5,-3.54,-25,-9999]},velocities:[1,1,1,37.5,37.5],accelerations:[10,10,10,300,300]},Xt=At,Ft=_t,Yt="V2-50",Wt=function(e){var t=e.joints,n=void 0===t?[0,0,0,0,0]:t,i=e.tool,r=void 0===i?null:i,a=e.model,o=void 0===a?null:a,s=e.modelOffsets,l=void 0===s?{X:0,Y:0,Z:0,A:0,B:0,C:0}:s,u=e.children,c=(0,He.Z)(e,Ct),m=(0,Ve.useRef)(),h=(0,Ke.L)("/gltf/v2-50.glb"),d=h.nodes,f=h.materials,p=(0,ze.z)().scene,v=(0,Ve.useRef)(),M=(0,Ve.useRef)(),g=(0,Ve.useRef)(),y=(0,Ve.useRef)(),S=(0,Ve.useRef)(),Z=mt(lt),E=mt(ut),x=mt(ct),I=(0,Ve.useMemo)((function(){return n.map((function(e,t){return Fn(Mt,t,e)?0:11141120}))}),[n]);return(0,Ve.useEffect)((function(){var e=1.25;f.BaseMaterial.envMap=p.environment,f.BaseMaterial.envMapIntensity=3,f.BackingPlateMaterial.envMap=p.environment,f.BackingPlateMaterial.envMapIntensity=3,f.TrunnionMaterial.envMap=p.environment,f.TrunnionMaterial.envMapIntensity=3,f.TableMaterial.envMap=p.environment,f.TableMaterial.envMapIntensity=3,f.SpindleMaterial.envMap=p.environment,f.SpindleMaterial.envMapIntensity=3,f.XMaterial.envMap=p.environment,f.XMaterial.envMapIntensity=3,f.ButtonsMaterial.envMap=p.environment,f.ButtonsMaterial.envMapIntensity=e,f.RailsMaterial.envMap=p.environment,f.RailsMaterial.envMapIntensity=e,f.ToolHolderMaterial.envMap=p.environment,f.ToolHolderMaterial.envMapIntensity=e;var t={name:"Base",object:v.current},n={name:"Spindle",object:M.current},i={name:"Table",object:g.current},r={name:"Part",object:S.current},a={name:"Trunnion",object:y.current};return Z(t),Z(n),Z(i),Z(a),Z(r),x(dt,ht),function(){E(t),E(n),E(i),E(a),E(r)}}),[Z,f,E,x,p]),(0,it.jsx)("group",(0,T.Z)((0,T.Z)({ref:m},c),{},{dispose:null,children:(0,it.jsxs)("group",{ref:v,children:[(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[-30,30,30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[-30,30,-30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.05,angle:Math.PI/8,penumbra:.15,decay:2,position:[30,30,30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.05,angle:Math.PI/8,penumbra:.15,decay:2,position:[30,30,-30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("spotLight",{intensity:.02,angle:Math.PI/8,penumbra:.15,decay:2,position:[30,-30,-30],rotation:[-.81,-.58,-.25]}),(0,it.jsx)("mesh",{geometry:d.Base_1.geometry,material:f.BaseMaterial}),(0,it.jsx)("mesh",{geometry:d.Base_2.geometry,material:f.RailsMaterial}),(0,it.jsx)("mesh",{geometry:d.buttons.geometry,material:f.ButtonsMaterial}),(0,it.jsx)("mesh",{geometry:d.cycle_start_led.geometry,material:f["None.002"]}),(0,it.jsx)("mesh",{geometry:d.estop_led.geometry,material:f["None.001"]}),(0,it.jsxs)("group",{"position-x":n[0],children:[(0,it.jsx)("mesh",{geometry:d.x_1.geometry,material:f.XMaterial,"material-emissive":I[0]}),(0,it.jsx)("mesh",{geometry:d.x_2.geometry,material:f.ZRailMaterial}),(0,it.jsxs)("mesh",{geometry:d.z.geometry,material:f.SpindleMaterial,ref:M,"position-z":6.26+n[2],"material-emissive":I[2],children:[(0,it.jsx)("mesh",{geometry:d.tool_holder.geometry,material:f.ToolHolderMaterial,"material-emissive":I[2]}),r]})]}),(0,it.jsx)("mesh",{geometry:d.y.geometry,material:f.BackingPlateMaterial,"position-y":-n[1],"material-emissive":I[1],children:(0,it.jsx)("mesh",{geometry:d.a.geometry,material:f.TrunnionMaterial,ref:y,"rotation-x":n[3]*Math.PI/180,"material-emissive":I[3],children:(0,it.jsxs)("mesh",{geometry:d.b.geometry,material:f.TableMaterial,ref:g,"rotation-y":n[4]*Math.PI/180,"material-emissive":I[4],children:[(0,it.jsxs)("group",{position:[l.X,l.Y,l.Z],"rotation-x":l.A*Math.PI/180,"rotation-y":l.B*Math.PI/180,children:[(0,it.jsx)("group",{ref:S}),o]}),u]})})})]})}))},Ht=["joints","tool","toolHolder","spindleAngle","model","targetFPS","modelOffsets","children"];var Vt=!0,zt=function(e){return 8+e},Kt=function(e,t){var n=$t(e,0),i=$t({X:n[0],Y:n[1],Z:n[2],B:t.B,C:t.C},0);return{X:i[0],Y:i[1],Z:i[2],B:0,C:0}},qt=function(e){var t=e[3],n=e[4],i=t*Math.PI/180,r=n*Math.PI/180,a=Math.cos(i),o=Math.sin(i);return{X:-Math.cos(r)*o,Y:Math.sin(r)*o,Z:a}},Jt=function(e,t){return Qt(e,t)},Qt=function(e,t){var n=e[3],i=e[4],r=n*Math.PI/180,a=i*Math.PI/180,o=Math.cos(r),s=Math.sin(r),l=Math.cos(a),u=Math.sin(a),c=t,m=e[0],h=e[1],d=e[2];return{X:l*o*m+u*h-l*s*(d-c),Y:-u*o*m+l*h+u*s*(d-c),Z:s*m+o*(d-c),A:0,B:n,C:i}},$t=function(e,t){var n=e.B,i=e.C,r=n*Math.PI/180,a=i*Math.PI/180,o=Math.cos(r),s=Math.sin(r),l=Math.cos(a),u=Math.sin(a),c=t,m=e.X,h=e.Y,d=e.Z;return[l*o*m-u*o*h+s*d,u*m+l*h,-l*s*m+u*s*h+o*d+c,n,i]},en={inverseKinematics:function(e,t){var n=e.kinematicsMode,i=0;t||(i=e.tool.toolLengthOffset.Z);var r=e.motion.position;return n===oe?$t(r,i):[r.X,r.Y,r.Z+i,r.B,r.C]},forwardKinematics:function(e,t){var n=e.kinematicsMode,i=t?0:e.tool.toolLengthOffset.Z,r=e.joints;return n===oe?Qt(r,i):{X:r[0],Y:r[1],Z:r[2]-i,A:0,B:r[3],C:r[4]}}},tn={extents:{max:[6.623,3.38785,.01,145,99999],min:[-3.03136,-3.5136,-6.24,-145,-99999]},velocities:[9.84,9.84,9.84,114.7,114.7],accelerations:[656,656,656,16e3,16e3]},nn=["X","Y","Z","B","C"],rn=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];r<t.extents.min[i]-We?n.push(xe(nn[i],Math.abs(r-t.extents.min[i]))):r>t.extents.max[i]+We&&n.push(Te(nn[i],Math.abs(r-t.extents.max[i])))}return n.length>0?n:[]},an="Solo",on=function(e){var t=e.joints,n=void 0===t?[0,0,0,0,0]:t,i=e.tool,r=void 0===i?null:i,a=e.toolHolder,o=void 0===a?"NONE":a,s=e.spindleAngle,l=void 0===s?0:s,u=e.model,c=void 0===u?null:u,m=e.targetFPS,h=void 0===m?120:m,d=e.modelOffsets,f=void 0===d?{X:0,Y:0,Z:0,A:0,B:0,C:0}:d,p=e.children,v=(0,He.Z)(e,Ht),g=(0,Ve.useRef)(),y=(0,ze.z)().scene,S=(0,Ke.L)("/gltf/solo.glb"),Z=S.nodes,E=S.materials,x=(0,Ve.useRef)(),I=(0,Ve.useRef)(),b=(0,Ve.useRef)(),G=(0,Ve.useRef)(),R=(0,Ve.useRef)(),A=(0,Ve.useRef)(),_=mt(lt),P=mt(ut),O=mt(ct),C=mt(st),L=(0,Ve.useMemo)((function(){return n.map((function(e,t){return Fn(yt,t,e)?0:11141120}))}),[n]),j=Z[o]?(0,it.jsx)("primitive",{object:Z[o],"rotation-z":l}):null,w=(0,Ve.useState)(new pt),N=(0,M.Z)(w,1)[0];return(0,ze.A)((function(){for(var e=function(){var e=C>50?0:20;b.current&&(b.current.position.z=.98*b.current.position.z+(1-.98)*e)},t=N.getElapsedTime(),n=1e3/h;t>n;)e(),t-=n,N.offsetStart(n)})),(0,Ve.useEffect)((function(){E.EnclosureMaterial.envMap=y.environment,E.EnclosureMaterial.envMapIntensity=3,E.DoorMaterial.envMap=y.environment,E.DoorMaterial.envMapIntensity=3,E.DoorClearAnnodize.envMap=y.environment,E.DoorClearAnnodize.envMapIntensity=3,E.ClearAnnodizedAluminum.envMap=y.environment,E.ClearAnnodizedAluminum.envMapIntensity=3,E.SpindleStainlessSteel.envMap=y.environment,E.SpindleStainlessSteel.envMapIntensity=1.5,E.SpindleBlack.envMap=y.environment,E.SpindleBlack.envMapIntensity=3,E.TrunnionMaterial.envMap=y.environment,E.TrunnionMaterial.envMapIntensity=3,E.TableRiserMaterial.envMap=y.environment,E.TableRiserMaterial.envMapIntensity=3,E.Mini90Material.envMap=y.environment,E.Mini90Material.envMapIntensity=1.5;var e={name:"Base",object:x.current},t={name:"Spindle",object:I.current},n={name:"Table",object:G.current},i={name:"Part",object:A.current},r={name:"Trunnion",object:R.current};return _(e),_(t),_(n),_(r),_(i),O(ft,dt),function(){P(e),P(t),P(n),P(r),P(i)}}),[_,E,P,y,g,I,G,R,x,O]),(0,it.jsx)("group",(0,T.Z)((0,T.Z)({ref:g},v),{},{dispose:null,children:(0,it.jsxs)("mesh",{geometry:Z.enclosure.geometry,material:E.EnclosureMaterial,"rotation-x":-Math.PI/2,children:[(0,it.jsx)("group",{ref:x}),(0,it.jsx)("spotLight",{intensity:.5,angle:Math.PI/8,penumbra:.15,decay:2,position:[-50,-50,50],rotation:[Math.PI/4,-.62,-Math.PI/6]}),(0,it.jsx)("spotLight",{intensity:.5,angle:Math.PI/8,penumbra:.15,decay:2,position:[56.27,-35.4,4.86],rotation:[Math.PI/4,.62,Math.PI/6]}),(0,it.jsx)("spotLight",{intensity:.07,angle:Math.PI/8,penumbra:.15,decay:2,position:[61.42,41.42,17.29],rotation:[-Math.PI/4,.62,2.62]}),(0,it.jsx)("spotLight",{intensity:.07,angle:Math.PI/8,penumbra:.15,decay:2,position:[-24.92,44.85,50],rotation:[-Math.PI/4,-.62,-2.62]}),(0,it.jsx)("spotLight",{intensity:.07,angle:Math.PI/8,penumbra:.15,decay:2,position:[-29.16,69.99,-49.41],rotation:[-2.36,-.62,2.62]}),(0,it.jsxs)("group",{visible:!0,ref:b,children:[(0,it.jsx)("mesh",{geometry:Z.door_1.geometry,material:E.DoorMaterial}),(0,it.jsx)("mesh",{geometry:Z.door_2.geometry,material:E.DoorClearAnnodize})]}),(0,it.jsxs)("group",{position:[n[0],n[1],zt(n[2])],ref:I,children:[(0,it.jsxs)("mesh",{geometry:Z.spindle_1.geometry,material:E.SpindleStainlessSteel,"material-emissive":L[0]|L[1]|L[2],children:[r,j]}),(0,it.jsx)("mesh",{geometry:Z.spindle_2.geometry,material:E.ClearAnnodizedAluminum,"material-emissive":L[0]|L[1]|L[2]}),(0,it.jsx)("mesh",{geometry:Z.spindle_3.geometry,material:E.SpindleBlack,"material-emissive":L[0]|L[1]|L[2]})]}),(0,it.jsx)("mesh",{geometry:Z.trunnion.geometry,material:E.TrunnionMaterial,"rotation-y":Math.PI/180*n[3],ref:R,"material-emissive":L[3],children:(0,it.jsxs)("mesh",{geometry:Z.mini90.geometry,material:E.Mini90Material,"rotation-z":Math.PI/180*n[4],ref:G,"material-emissive":L[4],children:[(0,it.jsxs)("group",{position:[f.X,f.Y,f.Z],"rotation-y":f.B*Math.PI/180,"rotation-z":f.C*Math.PI/180,children:[(0,it.jsx)("group",{ref:A}),c]}),(0,it.jsx)("mesh",{geometry:Z.tableRiser.geometry,material:E.TableRiserMaterial,position:[0,0,0],scale:[1,1,1]}),p]})})]})}))},sn=["joints","tool","toolHolder","spindleAngle","model","modelOffsets","children"];var ln=function(e){return 6+e},un=Et,cn=xt,mn=Tt,hn=It,dn=bt,fn=Gt,pn={extents:{max:[2.55,2.95,.1,95,99999],min:[-1.75,-2.05,-3.45,-5,-9999]},velocities:[.6666,.6666,.6666,10,20],accelerations:[10,10,10,1800,1800]},vn=At,Mn=_t,gn="V1",yn=function(e){var t=e.joints,n=void 0===t?[0,0,0,0,0]:t,i=e.tool,r=void 0===i?null:i,a=e.toolHolder,o=void 0===a?"NONE":a,s=e.spindleAngle,l=void 0===s?0:s,u=e.model,c=void 0===u?null:u,m=e.modelOffsets,h=void 0===m?{X:0,Y:0,Z:0,A:0,B:0,C:0}:m,d=e.children,f=(0,He.Z)(e,sn),p=(0,Ve.useRef)(),v=(0,Ke.L)("/gltf/v1.glb"),M=v.nodes,g=v.materials,y=(0,ze.z)().scene,S=(0,Ve.useRef)(),Z=(0,Ve.useRef)(),E=(0,Ve.useRef)(),x=(0,Ve.useRef)(),I=(0,Ve.useRef)(),b=mt(lt),G=mt(ut),R=mt(ct),A=(0,Ve.useMemo)((function(){return n.map((function(e,t){return Fn(gt,t,e)?0:11141120}))}),[n]),_=M[o]?(0,it.jsx)("primitive",{object:M[o],"rotation-z":l}):null;return(0,Ve.useEffect)((function(){var e=1.25;g.BaseMaterial.envMap=y.environment,g.BaseMaterial.envMapIntensity=e,g.StepperMaterial.envMap=y.environment,g.StepperMaterial.envMapIntensity=3,g.ButtonRingMaterial.envMap=y.environment,g.ButtonRingMaterial.envMapIntensity=3,g.RailsMaterial.envMap=y.environment,g.RailsMaterial.envMapIntensity=e,g.ButtonMaterial.envMap=y.environment,g.ButtonMaterial.envMapIntensity=e,g.ColletMaterial.envMap=y.environment,g.ColletMaterial.envMapIntensity=3,g["ColletMaterial.001"].envMap=y.environment,g["ColletMaterial.001"].envMapIntensity=3,g.XCarriageMaterial.envMap=y.environment,g.XCarriageMaterial.envMapIntensity=e,g.ZRailMaterial.envMap=y.environment,g.ZRailMaterial.envMapIntensity=e,g.SpindleMaterial.envMap=y.environment,g.SpindleMaterial.envMapIntensity=3,g.SpindleClearAnnodize.envMap=y.environment,g.SpindleClearAnnodize.envMapIntensity=e,g.ABackingPlateMaterial.envMap=y.environment,g.ABackingPlateMaterial.envMapIntensity=3,g.ABackingPlateClearAnnodize.envMap=y.environment,g.ABackingPlateClearAnnodize.envMapIntensity=e,g.TableMaterial.envMap=y.environment,g.TableMaterial.envMapIntensity=e,g.TrunnionMaterial.envMap=y.environment,g.TrunnionMaterial.envMapIntensity=3;var t={name:"Base",object:S.current},n={name:"Spindle",object:Z.current},i={name:"Table",object:E.current},r={name:"Part",object:I.current},a={name:"Trunnion",object:x.current};return b(t),b(n),b(i),b(a),b(r),R(dt,ht),function(){G(t),G(n),G(i),G(a),G(r)}}),[b,R,G,g,y]),(0,it.jsx)("group",(0,T.Z)((0,T.Z)({ref:p},f),{},{dispose:null,children:(0,it.jsxs)("group",{ref:S,children:[(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[-27.51,17.11,13.31]}),(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[-22.38,-37.04,13.82]}),(0,it.jsx)("spotLight",{intensity:.05,angle:Math.PI/8,penumbra:.15,decay:2,position:[23.41,-31.99,11.74]}),(0,it.jsx)("spotLight",{intensity:.05,angle:Math.PI/8,penumbra:.15,decay:2,position:[45.3,28.49,13.89]}),(0,it.jsx)("spotLight",{intensity:.02,angle:Math.PI/8,penumbra:.15,decay:2,position:[49.23,10.06,-26.13]}),(0,it.jsx)("mesh",{geometry:M.V1_Body_1.geometry,material:g.BaseMaterial}),(0,it.jsx)("mesh",{geometry:M.V1_Body_2.geometry,material:g.StepperMaterial}),(0,it.jsx)("mesh",{geometry:M.Button_Ring.geometry,material:g.ButtonRingMaterial}),(0,it.jsx)("mesh",{geometry:M.Rails.geometry,material:g.RailsMaterial}),(0,it.jsx)("mesh",{geometry:M.V1_Yellow_Button.geometry,material:g.ButtonMaterial}),(0,it.jsx)("mesh",{geometry:M.x.geometry,material:g.XCarriageMaterial,"position-x":n[0],"material-emissive":A[0],children:(0,it.jsx)("mesh",{geometry:M.zrail.geometry,material:g.ZRailMaterial,children:(0,it.jsxs)("group",{"position-z":6+n[2],ref:Z,children:[r,_,(0,it.jsx)("mesh",{geometry:M.z_1.geometry,material:g.SpindleMaterial,"material-emissive":A[2]}),(0,it.jsx)("mesh",{geometry:M.z_2.geometry,material:g.SpindleClearAnnodize,"material-emissive":A[2]})]})})}),(0,it.jsxs)("group",{"position-y":-n[1],children:[(0,it.jsx)("mesh",{geometry:M.y_1.geometry,material:g.ABackingPlateMaterial}),(0,it.jsx)("mesh",{geometry:M.y_2.geometry,material:g.ABackingPlateClearAnnodize}),(0,it.jsxs)("group",{"rotation-x":n[3]*Math.PI/180,ref:x,children:[(0,it.jsx)("mesh",{geometry:M.trunnion_1.geometry,material:g.TrunnionMaterial,"material-emissive":A[3]}),(0,it.jsx)("mesh",{geometry:M.trunnion_2.geometry,material:g.TrunnionClearAnnodize,"material-emissive":A[3]}),(0,it.jsxs)("mesh",{geometry:M.b.geometry,material:g.TableMaterial,"rotation-y":n[4]*Math.PI/180,ref:E,"material-emissive":A[4],children:[(0,it.jsxs)("group",{position:[h.X,h.Y,h.Z],"rotation-x":h.A*Math.PI/180,"rotation-y":h.B*Math.PI/180,children:[(0,it.jsx)("group",{ref:I}),c]}),d]})]})]})]})}))},Sn=["joints","tool","model","modelOffsets","children"];var Zn,En,xn,Tn,In,bn,Gn,Rn,An=function(e){return 4+e},_n=Et,Pn=xt,On=Tt,Cn=It,Ln=bt,jn=Gt,wn={extents:{max:[2.55,2.95,.1,95,99999],min:[-1.75,-2.05,-3.45,-5,-9999]},velocities:[.6666,.6666,.6666,10,20],accelerations:[10,10,10,1800,1800]},Nn=At,kn=_t,Bn="V1 Kickstarter",Dn=function(e){var t=e.joints,n=void 0===t?[0,0,0,0,0]:t,i=e.tool,r=void 0===i?null:i,a=e.model,o=void 0===a?null:a,s=e.modelOffsets,l=void 0===s?{X:0,Y:0,Z:0,A:0,B:0,C:0}:s,u=e.children,c=(0,He.Z)(e,Sn),m=(0,Ve.useRef)(),h=(0,Ke.L)("/gltf/v1kickstarter.glb"),d=h.nodes,f=h.materials,p=(0,ze.z)().scene,v=(0,Ve.useRef)(),M=(0,Ve.useRef)(),g=(0,Ve.useRef)(),y=(0,Ve.useRef)(),S=(0,Ve.useRef)(),Z=mt(lt),E=mt(ut),x=mt(ct),I=(0,Ve.useMemo)((function(){return n.map((function(e,t){return Fn(gt,t,e)?0:11141120}))}),[n]);return(0,Ve.useEffect)((function(){var e=1.25;f.BaseMaterial.envMap=p.environment,f.BaseMaterial.envMapIntensity=e,f.StepperMaterial.envMap=p.environment,f.StepperMaterial.envMapIntensity=3,f.ButtonRingMaterial.envMap=p.environment,f.ButtonRingMaterial.envMapIntensity=3,f.RailsMaterial.envMap=p.environment,f.RailsMaterial.envMapIntensity=e,f.ButtonMaterial.envMap=p.environment,f.ButtonMaterial.envMapIntensity=e,f.XCarriageMaterial.envMap=p.environment,f.XCarriageMaterial.envMapIntensity=3,f.ZRailMaterial.envMap=p.environment,f.ZRailMaterial.envMapIntensity=e,f.ToolHolderMaterial.envMap=p.environment,f.ToolHolderMaterial.envMapIntensity=e,f.SpindleMaterial.envMap=p.environment,f.SpindleMaterial.envMapIntensity=3,f.ABackingPlateMaterial.envMap=p.environment,f.ABackingPlateMaterial.envMapIntensity=3,f.TableMaterial.envMap=p.environment,f.TableMaterial.envMapIntensity=e,f.TrunnionMaterial.envMap=p.environment,f.TrunnionMaterial.envMapIntensity=3;var t={name:"Base",object:v.current},n={name:"Spindle",object:M.current},i={name:"Table",object:g.current},r={name:"Part",object:S.current},a={name:"Trunnion",object:y.current};return Z(t),Z(n),Z(i),Z(a),Z(r),x(dt,ht),function(){E(t),E(n),E(i),E(a),E(r)}}),[Z,E,x,f,p]),(0,it.jsx)("group",(0,T.Z)((0,T.Z)({ref:m},c),{},{dispose:null,children:(0,it.jsxs)("group",{ref:v,children:[(0,it.jsx)("spotLight",{intensity:.5,angle:Math.PI/8,penumbra:.15,decay:2,position:[-27.51,17.11,13.31]}),(0,it.jsx)("spotLight",{intensity:.5,angle:Math.PI/8,penumbra:.15,decay:2,position:[-22.38,-37.04,13.82]}),(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[23.41,-31.99,11.74]}),(0,it.jsx)("spotLight",{intensity:.15,angle:Math.PI/8,penumbra:.15,decay:2,position:[45.3,28.49,13.89]}),(0,it.jsx)("spotLight",{intensity:.07,angle:Math.PI/8,penumbra:.15,decay:2,position:[49.23,10.06,-26.13]}),(0,it.jsx)("mesh",{geometry:d.V1_Body_1.geometry,material:f.BaseMaterial}),(0,it.jsx)("mesh",{geometry:d.V1_Body_2.geometry,material:f.StepperMaterial}),(0,it.jsx)("mesh",{geometry:d.Button_Ring.geometry,material:f.ButtonRingMaterial}),(0,it.jsx)("mesh",{geometry:d.Rails.geometry,material:f.RailsMaterial}),(0,it.jsx)("mesh",{geometry:d.V1_Yellow_Button.geometry,material:f.ButtonMaterial}),(0,it.jsx)("mesh",{geometry:d.x.geometry,material:f.XCarriageMaterial,"position-x":n[0],"material-emissive":I[0],children:(0,it.jsx)("mesh",{geometry:d.zrail.geometry,material:f.ZRailMaterial,children:(0,it.jsxs)("group",{"position-z":4+n[2],ref:M,children:[r,(0,it.jsx)("mesh",{geometry:d.z_1.geometry,material:f.ToolHolderMaterial,"material-emissive":I[2]}),(0,it.jsx)("mesh",{geometry:d.z_2.geometry,material:f.SpindleMaterial,"material-emissive":I[2]})]})})}),(0,it.jsx)("mesh",{geometry:d.y.geometry,material:f.ABackingPlateMaterial,"position-y":-n[1],"material-emissive":I[1],children:(0,it.jsx)("mesh",{geometry:d.trunnion.geometry,material:f.TrunnionMaterial,"rotation-x":n[3]*Math.PI/180,ref:y,"material-emissive":I[3],children:(0,it.jsxs)("mesh",{geometry:d.b.geometry,material:f.TableMaterial,"rotation-y":n[4]*Math.PI/180,ref:g,"material-emissive":I[4],children:[(0,it.jsxs)("group",{position:[l.X,l.Y,l.Z],"rotation-x":l.A*Math.PI/180,"rotation-y":l.B*Math.PI/180,children:[(0,it.jsx)("group",{ref:S}),o]}),u]})})})]})}))},Un=(Zn={},(0,x.Z)(Zn,gt,h),(0,x.Z)(Zn,"V1KICKSTARTER",d),(0,x.Z)(Zn,vt,u),(0,x.Z)(Zn,Mt,c),(0,x.Z)(Zn,yt,m),Zn),Xn=Un,Fn=function(e,t,n){var i=Un[e].limits.extents.min[t],r=Un[e].limits.extents.max[t];return n>=i-We&&n<=r+We},Yn=function(){var e=function(){var e=new RegExp(/\s*\([^)]*\)/g),t=new RegExp(/\s*;.*/g),n=new RegExp(/\s+/g);return function(i){return i.replace(e,"").replace(t,"").replace(n,"")}}(),t=/(%.*)|({.*)|((?:\$\$)|(?:\$[a-zA-Z0-9#]*))|([a-zA-Z][0-9+\-.]+)|(\*[0-9]+)/gim;return function(n,i){(i=i||{}).flatten=!!i.flatten,i.noParseLine=!!i.noParseLine;var r,a,o={line:n};if(i.noParseLine)return o;o.words=[];for(var s=e(n).match(t)||[],l=0;l<s.length;++l){var u=s[l],c=u[0].toUpperCase(),m=u.slice(1);if("%"!==c)if("{"!==c)if("$"!==c)if("N"!==c||"undefined"!==typeof r)if("*"!==c||"undefined"!==typeof a){var h=Number(m);Number.isNaN(h)&&(h=m),i.flatten?o.words.push(c+h):o.words.push([c,h])}else a=Number(m);else r=Number(m);else o.cmds=(o.cmds||[]).concat("".concat(c).concat(m));else o.cmds=(o.cmds||[]).concat(n.trim());else o.cmds=(o.cmds||[]).concat(n.trim())}return"undefined"!==typeof r&&(o.ln=r),"undefined"!==typeof a&&(o.cs=a),o.cs&&function(e){(e=e||"").lastIndexOf("*")>=0&&(e=e.substr(0,e.lastIndexOf("*")));for(var t=0,n=0;n<e.length;++n)t^=e[n].charCodeAt(0);return t}(n)!==o.cs&&(o.err=!0),o}}(),Wn=n(8358),Hn=n(6766),Vn=function(e,t,n,i,r){r||(r=1);var a,o,s,l,u,c=Kn(t),m=e.X,h=e.Y,d=e.Z,f=t.X,p=t.Y,v=t.Z,M=t.I,g=t.J,y=t.K;if(c){var S=t.R,Z=.5*(f+m),E=.5*(p+h),x=.5*(f-m),T=.5*(p-h),I=Math.sqrt(x*x+T*T),b=Math.sqrt(S*S-I*I);switch(n){case we:Z=.5*(f+m),E=.5*(p+h),x=.5*(f-m),T=.5*(p-h),I=Math.sqrt(x*x+T*T),M=Z+(b=Math.sqrt(S*S-I*I))*T/I,g=E-b*x/I;break;case Ne:Z=.5*(v+d),E=.5*(f+m),x=.5*(v-d),T=.5*(f-m),I=Math.sqrt(x*x+T*T),y=Z+(b=Math.sqrt(S*S-I*I))*T/I,M=E-b*x/I;break;case ke:Z=.5*(p+h),E=.5*(v+d),x=.5*(p-h),T=.5*(v-d),I=Math.sqrt(x*x+T*T),g=Z+(b=Math.sqrt(S*S-I*I))*T/I,y=E-b*x/I}}else M=t.I,g=t.J,y=t.K;switch(n){case we:a=m-M,o=h-g,s=f-M,l=p-g,u=v-d;break;case Ne:a=d-y,o=m-M,s=v-y,l=f-M,u=p-h;break;case ke:a=-(d-y),o=h-g,s=-(v-y),l=p-g,u=f-m}var G=Math.sqrt(a*a+o*o),R=Math.atan2(o,a);R<0&&(R+=2*Math.PI);var A,_=Math.atan2(l,s);_<0&&(_+=2*Math.PI),i===re?(A=_-R)>We?A=-(2*Math.PI-A):A<We&&A>-We&&(A-=2*Math.PI*r):(A=_-R)<-We?A=2*Math.PI+A:A>-We&&A<We&&(A+=2*Math.PI*r);var P=u,O=A*G;return Math.sqrt(P*P+O*O)},zn=function(e,t,n,i){if(Kn(t)){var r=t.R;return{r0:r,r1:r}}var a,o,s,l,u=e.X,c=e.Y,m=e.Z,h=t.I,d=t.J,f=t.K,p=t.X,v=t.Y,M=t.Z;switch(n){case we:a=u-h,o=c-d,s=p-h,l=v-d;break;case Ne:a=m-f,o=u-h,s=M-f,l=p-h;break;case ke:a=-(m-f),o=c-d,s=-(M-f),l=v-d}return{r0:Math.sqrt(a*a+o*o),r1:Math.sqrt(s*s+l*l)}},Kn=function(e){return e.R>We},qn=function(e,t,n,i,r,a,o){if(!o){var s=function(e,t,n){var i=Math.floor(n);return{X:e.X*(1-i)+t.X*i,Y:e.Y*(1-i)+t.Y*i,Z:e.Z*(1-i)+t.Z*i,A:e.A*(1-i)+t.A*i,B:e.B*(1-i)+t.B*i,C:e.C*(1-i)+t.C*i}}(t,n,i);return s}switch(e){case ne:case ie:var l=function(e,t,n){return{X:e.X*(1-n)+t.X*n,Y:e.Y*(1-n)+t.Y*n,Z:e.Z*(1-n)+t.Z*n,A:e.A*(1-n)+t.A*n,B:e.B*(1-n)+t.B*n,C:e.C*(1-n)+t.C*n}}(t,n,i);return l;case te:return n;case re:case ae:return function(e,t,n,i,r,a){a||(a=1);var o,s,l,u,c,m,h,d=Kn(t),f=e.X,p=e.Y,v=e.Z,M=t.X,g=t.Y,y=t.Z;if(d){var S=t.R,Z=.5*(M+f),E=.5*(g+p),x=.5*(M-f),T=.5*(g-p),I=Math.sqrt(x*x+T*T),b=Math.sqrt(S*S-I*I);switch(i){case we:Z=.5*(M+f),E=.5*(g+p),x=.5*(M-f),T=.5*(g-p),I=Math.sqrt(x*x+T*T),o=Z+(b=Math.sqrt(S*S-I*I))*T/I,s=E-b*x/I;break;case Ne:Z=.5*(y+v),E=.5*(M+f),x=.5*(y-v),T=.5*(M-f),I=Math.sqrt(x*x+T*T),l=Z+(b=Math.sqrt(S*S-I*I))*T/I,o=E-b*x/I;break;case ke:Z=.5*(g+p),E=.5*(y+v),x=.5*(g-p),T=.5*(y-v),I=Math.sqrt(x*x+T*T),s=Z+(b=Math.sqrt(S*S-I*I))*T/I,l=E-b*x/I}}else o=t.I,s=t.J,l=t.K;switch(i){case we:u=f-o,c=p-s,m=M-o,h=g-s;break;case Ne:u=v-l,c=f-o,m=y-l,h=M-o;break;case ke:u=-(v-l),c=p-s,m=-(y-l),h=g-s}var G=Math.atan2(c,u);G<0&&(G+=2*Math.PI);var R,A=Math.atan2(h,m);A<0&&(A+=2*Math.PI),r===re?(R=A-G)>We?R=-(2*Math.PI-R):R<We&&R>-We&&(R-=2*Math.PI*a):(R=A-G)<-We?R=2*Math.PI+R:R>-We&&R<We&&(R+=2*Math.PI*a),R*=n;var _,P,O,C=Math.cos(R),L=Math.sin(R);switch(i){case we:_=o+(f-o)*C-(p-s)*L,P=s+(f-o)*L+(p-s)*C,O=v*(1-n)+y*n;break;case Ne:_=o+(f-o)*C+(v-l)*L,P=p*(1-n)+g*n,O=l-(f-o)*L+(v-l)*C;break;case ke:_=f*(1-n)+M*n,P=s+(p-s)*C-(v-l)*L,O=l+(p-s)*L+(v-l)*C}return{X:_,Y:P,Z:O,A:e.A*(1-n)+t.A*n,B:e.B*(1-n)+t.B*n,C:e.C*(1-n)+t.C*n}}(t,n,i,r,e,a);default:return console.error(e," motion mode not implemented, jumping to final position."),n}},Jn=(0,I.dA)({UI:{GCODE_PANE:{TOGGLE_PANE:void 0,SET_WIDTH:void 0,SET_SELECTED:void 0,SET_LINE_OFFSET:void 0,SET_SHOW_LINES:void 0,SCROLL:void 0,SET_TAB:void 0,SHOW:void 0,HIDE:void 0}}}),Qn=(0,I.dA)({UI:{CONTROLS_OVERLAY:{SET_ALWAYS_VISIBLE:void 0,SET_VISIBLE:void 0,TOGGLE_PANE:void 0,PLAY:void 0,PREVIOUS:void 0,NEXT:void 0,HOME:void 0,SHUFFLE:void 0}}}),$n=(0,I.dA)({UI:{TITLE_BAR:{HIDE:void 0,SHOW:void 0}}}),ei=(0,I.dA)({UI:{DEMO:{ENABLE:void 0,DISABLE:void 0,RESET:void 0,PREVIOUS:void 0,NEXT:void 0,SET:void 0,SET_QR:void 0,SET_FEATURES_SUB_STEP:void 0,NEXT_FEATURES_SUB_STEP:void 0}}}),ti=(0,I.dA)({UI:{OPTIONS:{EXPAND:void 0,COLLAPSE:void 0,TOGGLE:void 0}}}),ni={ui:(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},Jn.ui),Qn.ui),$n.ui),ei.ui),ti.ui)},ii=(0,I.dA)({IFRAME:{INITIALIZE:void 0,ROCKHOPPER:void 0,TO_ROCKHOPPER:void 0,EMBED_GCODE:void 0}}),ri=(0,I.dA)({VIEWER3D:{SHOW_MODEL:void 0,HIDE_MODEL:void 0,LOAD_MODEL:void 0,SET_MODEL_SCALE:void 0,SET_MODEL_COLOR:void 0,SET_MODEL_OFFSET_TYPE:void 0,SET_MODEL_OFFSET_INDEX:void 0,SET_SHOW_BETWEEN_LINES:void 0,SET_SHOW_TIME_SLICE:void 0,SET_SHOW_PAST_ONLY:void 0,SET_SHOW_FUTURE_ONLY:void 0,SET_MIN_LINE:void 0,SET_MAX_LINE:void 0,SET_AUTOMATICALLY_UPDATE_LINES:void 0,SET_ISOLATE_SLIDER:void 0,SET_TIME_SLICE:void 0,SET_RAPID_COLOR:void 0,SET_FEED_COLOR:void 0,SET_OFFSET:void 0,RESET:void 0}}),ai=(0,I.dA)({RFID:{RECEIVED_RFID_SCAN_MESSAGE:void 0,RECEIVED_ERROR_MESSAGE:void 0,RECEIVED_INCOMPLETE_MESSAGE:void 0,CONNECTED_SCANNER:void 0,DISCONNECTED_SCANNER:void 0}}),oi=(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},H),b),ni),ii),ri),ai),si=(0,I.jZ)((En={},(0,x.Z)(En,j.machineState.feedRateMode.setInverseTime,(function(){return Ce})),(0,x.Z)(En,j.machineState.feedRateMode.setUnitsPerMinute,(function(){return Le})),(0,x.Z)(En,j.machineState.feedRateMode.setUnitsPerRevolution,(function(){return je})),En),Le),li=(0,I.jZ)((0,x.Z)({},w.machineState.feedRate.set,(function(e,t){return t.payload})),0),ui=(0,I.jZ)((xn={},(0,x.Z)(xn,U.machineState.planeSelect.setXY,(function(){return we})),(0,x.Z)(xn,U.machineState.planeSelect.setZX,(function(){return Ne})),(0,x.Z)(xn,U.machineState.planeSelect.setYZ,(function(){return ke})),(0,x.Z)(xn,U.machineState.planeSelect.setUV,(function(){return Be})),(0,x.Z)(xn,U.machineState.planeSelect.setWU,(function(){return De})),(0,x.Z)(xn,U.machineState.planeSelect.setVW,(function(){return Ue})),xn),we),ci=(0,I.jZ)((Tn={},(0,x.Z)(Tn,N.machineState.units.setIn,(function(){return Xe})),(0,x.Z)(Tn,N.machineState.units.setMm,(function(){return Fe})),Tn),Xe),mi="LONG",hi="NONE",di={Z:0,R:0,holder:hi},fi=(0,I.jZ)((In={},(0,x.Z)(In,Y.machineState.tool.set,(function(e,t){if(t.payload>=0){var n=Math.min(t.payload,55);return(0,T.Z)((0,T.Z)({},e),{},{set:n})}return e})),(0,x.Z)(In,Y.machineState.tool.change,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{loaded:e.set})})),(0,x.Z)(In,Y.machineState.tool.setToolLengthOffset,(function(e,t){var n=t.payload.H,i=e.loaded;void 0!==n&&n>0&&(i=n),i=Math.min(i,55);var r=e.table[i];return(0,T.Z)((0,T.Z)({},e),{},{toolLengthOffset:r})})),(0,x.Z)(In,Y.machineState.tool.clearToolLengthOffset,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{toolLengthOffset:di})})),(0,x.Z)(In,Y.machineState.tool.table.setTool,(function(e,t){var n=t.payload,i=n.P,r={X:n.X,Y:n.Y,Z:n.Z,A:n.A,B:n.B,C:n.C,U:n.U,V:n.V,W:n.W,R:n.R,I:n.I,J:n.J,Q:n.Q,holder:n.holder,type:n.type};for(var a in r)void 0===r[a]&&delete r[a];var o=(0,A.Z)(e.table);return i>0&&(o[i]=(0,T.Z)((0,T.Z)({},o[i]),r)),(0,T.Z)((0,T.Z)({},e),{},{table:o})})),In),{set:0,loaded:0,toolLengthOffset:di,table:[{Z:0,R:0,holder:hi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi},{Z:-3,R:.0625,holder:mi}]}),pi=fi,vi=(0,I.jZ)((bn={},(0,x.Z)(bn,oi.machineState.kinematicsMode.setFiveAxis,(function(){return oe})),(0,x.Z)(bn,oi.machineState.kinematicsMode.setTrivial,(function(){return se})),(0,x.Z)(bn,oi.interpreter.stop,(function(){return se})),(0,x.Z)(bn,oi.interpreter.run,(function(){return se})),bn),se),Mi=(0,I.jZ)((0,x.Z)({},B.machineState.cutterCompensation.off,void 0),Ye),gi=(0,I.jZ)((0,x.Z)({},F.machineState.spindleSpeed.set,(function(e,t){return t.payload})),0),yi=(0,I.jZ)((Gn={},(0,x.Z)(Gn,X.machineState.spindleControl.off,(function(){return"OFF"})),(0,x.Z)(Gn,X.machineState.spindleControl.ccw,(function(){return"CCW"})),(0,x.Z)(Gn,X.machineState.spindleControl.cw,(function(){return"CW"})),Gn),"OFF"),Si=(0,I.jZ)((0,x.Z)({},W.machineState.machine.set,(function(e,t){return t.payload})),vt),Zi=n(4322),Ei=function(e,t){var n=e.payload,i=n.X,r=n.Y,a=n.Z,o=n.I,s=n.J,l=n.K,u=n.P,c=n.units,m=n.machineState,h=m.motion,d=h.position,f=h.g5x,p=m.machine,v=f.offsets[f.index],M=d.A,g=d.B,y=d.C,S=Xn[p].inverseFiveAxis({X:(c===Fe?i/25.4:i)+v.X,Y:(c===Fe?r/25.4:r)+v.Y,Z:(c===Fe?a/25.4:a)+v.Z,A:v.A,B:v.B,C:v.C},0),Z=Xn[p].inverseFiveAxis({X:S[0],Y:S[1],Z:S[2],A:M,B:g,C:y},0),E={X:(Z[0]-v.X)*o+(d.X-v.X)*(1-o),Y:(Z[1]-v.Y)*s+(d.Y-v.Y)*(1-s),Z:(Z[2]-v.Z)*l+(d.Z-v.Z)*(1-l),A:M,B:g,C:y,units:Xe};return{position:Ti((0,T.Z)((0,T.Z)({},m.motion),{},{distanceMode:Ae}),{payload:E}),mode:u?ie:ne}},xi={mode:te,distanceMode:Ae,arcDistanceMode:Oe,turns:0,issuedMotionCommand:!1,position:{X:0,Y:1.5,Z:0,A:0,B:0,C:0,I:0,J:0,K:0},g5x:{index:1,offsets:[{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0},{X:0,Y:0,Z:0,A:0,B:0,C:0}]}},Ti=function(e,t){var n=e.position,i=t.payload,r=i.X,a=i.Y,o=i.Z,s=i.A,l=i.B,u=i.C,c=i.I,m=i.J,h=i.K,d=i.R,f=i.units,p=i.G53,v=e.distanceMode,M=e.arcDistanceMode,g=e.g5x.offsets[e.g5x.index],y=Kn(t.payload),S={X:r,Y:a,Z:o,A:s,B:l,C:u};for(var Z in S)void 0===S[Z]?delete S[Z]:f!==Fe||"X"!==Z&&"Y"!==Z&&"Z"!==Z||(S[Z]=S[Z]/25.4);var E={I:c,J:m,K:h};for(var x in E)void 0===E[x]?E[x]=0:f===Fe&&(E[x]=E[x]/25.4);var I=e.position;if(!p)if(v===Ae){var b={};for(var G in S)b[G]=S[G]+g[G];I=(0,T.Z)((0,T.Z)({},e.position),b)}else for(var R in I=(0,T.Z)({},I),S)I[R]=n[R]+S[R];if(M===Pe)I=(0,T.Z)((0,T.Z)({},e.position),E);else{var A={I:"X",J:"Y",K:"Z"};for(var _ in I=(0,T.Z)({},I),E)I[_]=n[A[_]]+E[_]}return I=y?f===Fe?(0,T.Z)((0,T.Z)({},I),{},{R:d/25.4}):(0,T.Z)((0,T.Z)({},I),{},{R:d}):(0,T.Z)((0,T.Z)({},I),{},{R:0})},Ii=(0,I.jZ)((Rn={},(0,x.Z)(Rn,H.machineState.motion.resetRotary,(function(e,t){var n=t.payload,i=n.P,r=n.machineState,a=e.position,o=r.machine,s=Xn[o].limits.extents.min[4],l=Xn[o].limits.extents.max[4],u=Xn[o].jointLabels[4],c=function(e,t,n,i){var r=e%360,a=t%360;r<0&&(r+=360),a<0&&(a+=360);var o=r-a;o>180?o-=360:o<-180&&(o+=360);var s=t+o;return s>i&&(s-=360*Math.ceil((s-i)/360)),s<n&&(s+=360*Math.ceil((n-s)/360)),s}(a[u],i,s,l),m=(0,T.Z)((0,T.Z)({},e.position),{},(0,x.Z)({},u,c));return(0,T.Z)((0,T.Z)({},e),{},{position:m})})),(0,x.Z)(Rn,H.machineState.distanceMode.setAbsolute,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{distanceMode:Ae})})),(0,x.Z)(Rn,H.machineState.distanceMode.setIncremental,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{distanceMode:_e})})),(0,x.Z)(Rn,H.machineState.motion.nonMotionCommand,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{issuedMotionCommand:!1})})),(0,x.Z)(Rn,H.machineState.motion.off,(function(e,t){return(0,T.Z)((0,T.Z)({},e),{},{mode:te})})),(0,x.Z)(Rn,H.machineState.motion.rapid,(function(e,t){var n=Ti(e,t);return(0,T.Z)((0,T.Z)({},e),{},{position:n,issuedMotionCommand:!0,mode:ne})})),(0,x.Z)(Rn,H.machineState.motion.linear,(function(e,t){var n=Ti(e,t);return(0,T.Z)((0,T.Z)({},e),{},{position:n,issuedMotionCommand:!0,mode:ie})})),(0,x.Z)(Rn,H.machineState.motion.localMove,(function(e,t){var n=Ei(t),i=n.position,r=n.mode;return(0,T.Z)((0,T.Z)({},e),{},{position:i,issuedMotionCommand:!0,mode:r})})),(0,x.Z)(Rn,H.machineState.motion.arcCW,(function(e,t){var n=t.payload.P,i=Ti(e,t);return(0,T.Z)((0,T.Z)({},e),{},{position:i,turns:n,issuedMotionCommand:!0,mode:re})})),(0,x.Z)(Rn,H.machineState.motion.arcCCW,(function(e,t){var n=t.payload.P,i=Ti(e,t);return(0,T.Z)((0,T.Z)({},e),{},{position:i,turns:n,issuedMotionCommand:!0,mode:ae})})),(0,x.Z)(Rn,H.machineState.motion.setPosition,(function(e,t){var n=Ti(e,t);return(0,T.Z)((0,T.Z)({},e),{},{position:n,issuedMotionCommand:!0})})),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG54,(0,Zi.ZP)((function(e,t){e.g5x.index=1}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG55,(0,Zi.ZP)((function(e,t){e.g5x.index=2}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG56,(0,Zi.ZP)((function(e,t){e.g5x.index=3}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG57,(0,Zi.ZP)((function(e,t){e.g5x.index=4}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG58,(0,Zi.ZP)((function(e,t){e.g5x.index=5}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG59,(0,Zi.ZP)((function(e,t){e.g5x.index=6}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG591,(0,Zi.ZP)((function(e,t){e.g5x.index=7}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG592,(0,Zi.ZP)((function(e,t){e.g5x.index=8}))),(0,x.Z)(Rn,H.machineState.motion.g5x.enableG593,(0,Zi.ZP)((function(e,t){e.g5x.index=9}))),(0,x.Z)(Rn,H.machineState.motion.g5x.computeDynamicWorkOffsets,(0,Zi.ZP)((function(e,t){var n=t.payload,i=n.P,r=n.machineState,a=e.position,o=e.g5x,s=r.machine;e.g5x.offsets[i]=Xn[s].computeDynamicWorkOffsets(o.offsets[o.index],a)}))),(0,x.Z)(Rn,H.machineState.motion.g5x.setG5xWorkOffset,(0,Zi.ZP)((function(e,t){var n=t.payload,i=n.index,r=n.axis,a=n.value;e.g5x.offsets[i][r]=a}))),Rn),xi),bi=Ii,Gi=function(e,t){return e||[0,1.5,0,0,0]},Ri=(0,Wn.UY)({machine:Si,feedRateMode:si,feedRate:li,units:ci,tool:pi,planeSelect:ui,kinematicsMode:vi,cutterCompensation:Mi,spindleSpeed:gi,spindleControl:yi,motion:bi,joints:Gi}),Ai=(0,Hn.Z)((function(e,t){return t.type===oi.machineState.set.toString()?t.payload:Ri(e,t)}),(function(e,t){var n=function(e){var t;return(0,I.jZ)((t={},(0,x.Z)(t,(0,I.Y2)(H.machineState.motion.rapid,H.machineState.motion.linear,H.machineState.motion.arcCW,H.machineState.motion.arcCCW,H.machineState.motion.setPosition,H.machineState.motion.resetRotary),(function(t,n){var i,r=n.payload,a=r.X,o=r.Y,s=r.Z,l=r.A,u=r.B,c=r.C,m=r.units,h=r.G53,d=Xn[e.machine];if(h){var f=d.kinematics.forwardKinematics(e,h),p={X:a,Y:o,Z:s,A:l,B:u,C:c};for(var v in p)void 0===p[v]?delete p[v]:m!==Fe||"X"!==v&&"Y"!==v&&"Z"!==v||(p[v]=p[v]/25.4);if(e.motion.distanceMode===Ae)f=(0,T.Z)((0,T.Z)({},f),p);else for(var M in f=(0,T.Z)({},f),p)f[M]=f[M]+p[M];i=d.kinematics.inverseKinematics((0,T.Z)((0,T.Z)({},e),{},{motion:(0,T.Z)((0,T.Z)({},e.motion),{},{position:f})}),h)}else i=d.kinematics.inverseKinematics(e);return i})),(0,x.Z)(t,H.machineState.motion.localMove,(function(t,n){var i=Ei(n),r=i.position,a=i.mode;return Xn[e.machine].kinematics.inverseKinematics((0,T.Z)((0,T.Z)({},e),{},{distanceMode:a,motion:(0,T.Z)((0,T.Z)({},e.motion),{},{position:r})}),!1)})),t),[0,0,0,0,0])}(e)(e.joints,t);return(0,T.Z)((0,T.Z)({},e),{},{joints:n})}),(function(e,t){var n=function(e){return(0,I.jZ)((0,x.Z)({},(0,I.Y2)(H.machineState.tool.setToolLengthOffset,H.machineState.tool.clearToolLengthOffset,H.machineState.motion.rapid,H.machineState.motion.linear,H.machineState.motion.localMove,H.machineState.motion.arcCW,H.machineState.motion.arcCCW,H.machineState.motion.setPosition,H.machineState.motion.resetRotary,H.machineState.kinematicsMode.setFiveAxis,H.machineState.kinematicsMode.setTrivial),(function(t,n){var i=Xn[e.machine],r=(0,T.Z)((0,T.Z)({},t.position),i.kinematics.forwardKinematics(e));return(0,T.Z)((0,T.Z)({},t),{},{position:r})})),xi)}(e)(e.motion,t);return(0,T.Z)((0,T.Z)({},e),{},{motion:n})})),_i=n(9059),Pi=function(e){return e.interpreter.messages},Oi=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return"undefined"!==typeof e.line})).map((function(e){return{row:e.line,column:0,text:e.message,type:e.severity}}))})),Ci=(0,_i.P1)([Pi],(function(e){var t=e.filter((function(e){return e.type===de})),n={};t.forEach((function(e){n[e.axis]||(n[e.axis]=[]),n[e.axis].push(e)}));var i={};for(var r in n)i[r]=n[r].reduce((function(e,t){return t.amount>e.amount?t:e}),n[r][0]);return i})),Li=(0,_i.P1)([Pi],(function(e){var t=e.filter((function(e){return e.type===he})),n={};t.forEach((function(e){n[e.axis]||(n[e.axis]=[]),n[e.axis].push(e)}));var i={};for(var r in n)i[r]=n[r].reduce((function(e,t){return t.amount>e.amount?t:e}),n[r][0]);return i})),ji=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return e.type===me}))})),wi=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return e.severity===le&&-1===[de,he].indexOf(e.type)}))})),Ni=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return e.severity===ue&&-1===[me].indexOf(e.type)}))})),ki=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return e.type===ge}))})),Bi=(0,_i.P1)([Pi],(function(e){var t=e.filter((function(e){return e.type===ge}));if(t.length>0)return t[t.length-1]})),Di=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return e.type===pe}))})),Ui=(0,_i.P1)([Pi],(function(e){return e.filter((function(e){return e.type===ve}))})),Xi=(0,_i.P1)([Pi],(function(e){return e.find((function(e){return e.type===ve}))})),Fi=(0,_i.P1)([Pi],(function(e){var t=e.filter((function(e){return e.type===Me})).map((function(e){return e.wcs})),n={},i=[];return e.filter((function(e){return e.type===ve&&!t.includes(e.wcs)})).forEach((function(e){n[e.wcs]||(i.push(e),n[e.wcs]=!0)})),i})),Yi=f,Wi=((0,_i.P1)([function(e){return e.interpreter.initialState.units},Yi.lastSetUnitsMessage],(function(e,t){return t?"G21"===t.code?Fe:Xe:e})),function(e){var t=e.tool;return t.table[t.loaded]}),Hi=function(){return new tt.ShaderMaterial({uniforms:{colors:{value:[new tt.Color(128),new tt.Color(16777215)]},offset:{value:.004},minTime:{value:0},maxTime:{value:9999999999},minLine:{value:0},maxLine:{value:9999999999},maxY:{value:99999999},maxXZ:{value:99999999}},vertexColors:!0,vertexShader:"\nuniform vec3 colors[2];\nuniform float minTime;\nuniform float maxTime;\nuniform float minLine;\nuniform float maxLine;\nuniform float offset;\nuniform float maxXZ;\nuniform float maxY;\n\nattribute float line;\nattribute float time;\nattribute float speed;\nattribute float colorIndex;\n\nvarying vec3 vPos;\nvarying vec3 vColor;\nvarying float vLine;\nvarying float vTime;\nvoid main() {\n  vPos = position + offset*normal;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( vPos, 1.0 );\n  vColor = colors[int(colorIndex)];\n  vLine = line;\n  vTime = time;\n}\n",fragmentShader:"\nuniform float minTime;\nuniform float maxTime;\nuniform float minLine;\nuniform float maxLine;\nuniform float maxXZ;\nuniform float maxY;\n\nvarying vec3 vColor;\nvarying vec3 vPos;\nvarying float vLine;\nvarying float vTime;\nvoid main()\t{\n  if(length(vPos.xz) > maxXZ || \n     abs(vPos.y) > maxY ||\n     vTime < minTime || vTime > maxTime ||\n     vLine < minLine || vLine > maxLine) {\n\n    discard;\n  }\n  gl_FragColor = vec4(vColor, 1.);\n}\n"})},Vi=new Float32Array([0,0,.5]),zi=new Float32Array([1,1,1]),Ki=(new Float32Array([1,.5,0]),new Float32Array([0,0,1]),function(){function e(t,n){(0,P.Z)(this,e);var i="object"===typeof t;if(this.capacity=i?2*t.capacity:t,this.numPoints=0,this.geometry=new tt.BufferGeometry,this.vertices=new Float32Array(3*this.capacity),this.colors=new Float32Array(3*this.capacity),this.normals=new Float32Array(3*this.capacity),this.lines=new Float32Array(this.capacity),this.times=new Float32Array(this.capacity),this.colorIndices=new Float32Array(this.capacity),i){var r=t;this.vertices.set(r.vertices),this.colors.set(r.colors),this.normals.set(r.normals),this.lines.set(r.lines),this.times.set(r.times),this.colorIndices.set(r.colorIndices),this.geometry.setDrawRange(r.geometry.drawRange.start,r.geometry.drawRange.count),this.numPoints=r.numPoints}this.geometry.setAttribute("position",new tt.BufferAttribute(this.vertices,3)),this.geometry.setAttribute("color",new tt.BufferAttribute(this.colors,3)),this.geometry.setAttribute("normal",new tt.BufferAttribute(this.normals,3)),this.geometry.setAttribute("line",new tt.BufferAttribute(this.lines,1)),this.geometry.setAttribute("time",new tt.BufferAttribute(this.times,1)),this.geometry.setAttribute("colorIndex",new tt.BufferAttribute(this.colorIndices,1)),i&&(this.geometry.attributes.position.updateRange.offset=0,this.geometry.attributes.color.updateRange.offset=0,this.geometry.attributes.normal.updateRange.offset=0,this.geometry.attributes.line.updateRange.offset=0,this.geometry.attributes.time.updateRange.offset=0,this.geometry.attributes.colorIndex.updateRange.offset=0,this.geometry.attributes.position.updateRange.count=3*this.numPoints,this.geometry.attributes.color.updateRange.count=3*this.numPoints,this.geometry.attributes.normal.updateRange.count=3*this.numPoints,this.geometry.attributes.line.updateRange.count=this.numPoints,this.geometry.attributes.time.updateRange.count=this.numPoints,this.geometry.attributes.colorIndex.updateRange.count=this.numPoints,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.attributes.normal.needsUpdate=!0,this.geometry.attributes.line.needsUpdate=!0,this.geometry.attributes.time.needsUpdate=!0,this.geometry.attributes.colorIndex.needsUpdate=!0),this.geometry.attributes.position.setUsage(tt.DynamicDrawUsage),this.geometry.attributes.color.setUsage(tt.DynamicDrawUsage),this.geometry.attributes.normal.setUsage(tt.DynamicDrawUsage),this.geometry.attributes.line.setUsage(tt.DynamicDrawUsage),this.geometry.attributes.time.setUsage(tt.DynamicDrawUsage),this.geometry.attributes.colorIndex.setUsage(tt.DynamicDrawUsage),this.geometry.setDrawRange(0,0),this.object=new tt.Line(this.geometry,n),this.object.frustumCulled=!1}return(0,_.Z)(e,[{key:"clear",value:function(){this.numPoints=0,this.updateDrawRange()}},{key:"updateDrawRange",value:function(){this.geometry.setDrawRange(0,this.numPoints)}},{key:"updateAttribute",value:function(e,t,n){var i=this.geometry.attributes[e];i.updateRange.count>-1?(i.updateRange.count+=n,i.needsUpdate=!0):(i.updateRange.offset=t,i.updateRange.count=n,i.needsUpdate=!0)}},{key:"addPoint",value:function(e){var t=3*this.numPoints;this.vertices[t]=e.position[0],this.vertices[t+1]=e.position[1],this.vertices[t+2]=e.position[2],this.colors[t]=e.color[0],this.colors[t+1]=e.color[1],this.colors[t+2]=e.color[2],this.normals[t]=e.normal[0],this.normals[t+1]=e.normal[1],this.normals[t+2]=e.normal[2],this.lines[this.numPoints]=e.line,this.times[this.numPoints]=e.time,this.colorIndices[this.numPoints]=e.colorIndex,this.updateAttribute("position",t,3),this.updateAttribute("color",t,3),this.updateAttribute("normal",t,3),this.updateAttribute("line",this.numPoints,1),this.updateAttribute("time",this.numPoints,1),this.updateAttribute("colorIndex",this.numPoints,1),this.numPoints++,this.updateDrawRange()}}]),e}());(function(){function e(){(0,P.Z)(this,e),this.material=Hi(),this.object=new tt.Group,this.lineObject=new Ki(1e5,this.material),this.object.frustumCulled=!1,this.object.add(this.lineObject.object)}return(0,_.Z)(e,[{key:"clear",value:function(){this.lineObject.clear()}},{key:"setMaxXZ",value:function(e){this.material.uniforms.maxXZ.value=e}},{key:"setMaxY",value:function(e){this.material.uniforms.maxY.value=e}},{key:"setOffset",value:function(e){this.material.uniforms.offset.value=e}},{key:"setMinLine",value:function(e){this.material.uniforms.minLine.value=e}},{key:"setMaxLine",value:function(e){this.material.uniforms.maxLine.value=e}},{key:"setMinTime",value:function(e){this.material.uniforms.minTime.value=e}},{key:"setMaxTime",value:function(e){this.material.uniforms.maxTime.value=e}},{key:"addPoints",value:function(e){var t=this;e.forEach((function(e){t.lineObject.numPoints===t.lineObject.capacity&&(t.object.remove(t.lineObject.object),t.lineObject=new Ki(t.lineObject,t.material),t.object.add(t.lineObject.object)),t.lineObject.addPoint(e)}))}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}()).instance=void 0;var qi=(0,_.Z)((function e(t){var n=this;(0,P.Z)(this,e),this.getState=function(){return n.store.getState()},this.interpret=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a={},o=[],s=Yn(e);for(var l in s.words.forEach((function(e,t){var n=(0,M.Z)(e,2),i=n[0]+n[1],r=function(e){return O[e]}(i);void 0!==r&&(a[r]?a[r].push(i):a[r]=[i]),function(e){return C[e]}(i)&&o.push(i)})),o.length>1&&i.push(Re({message:"Can't run multiple commands with positional arguments on the same line. Codes "+(t=o).slice(0,t.length-1).join(", ")+" and "+t[t.length-1]+" use positional arguments.",codes:t,type:"MULTIPLE_COMMANDS_WITH_POSITIONAL_ARGS",severity:le},r)),a)a[l].length>1&&i.push(Re(Ee(a[l],l),r));var u={},c=[],m=[],h=[],d=!1,f=!1,p=!1;s.words.forEach((function(e,t){var n=function(e){return J[e]}(e[0]);n&&(c.push([n,e[1]]),"T"===e[0]&&(Math.floor(e[1])!==e[1]&&i.push(Re(Se(e[1]),r)),e[1]<0&&i.push(Re({message:"Tool number must be greater than or equal to 0. ",type:"TOOL_NUMBER_LESS_THAN_ZERO",severity:le},r)),0===e[1]&&i.push(Re({message:"Tool number 0 is not recommended as its length cannot be changed. Tool 0's\ntool length offset is 0, which represents a tool that extends all the way \nto the center of rotation when in the home position and has a diameter of 0.",type:"TOOL_NUMBER_EQUAL_TO_ZERO",severity:ue},r)),e[1]>55&&i.push(Re(Ze(),r))));var a=e[0]+e[1];"G43"===a&&(d=!0),"M254"===a&&(f=!0);var o=function(e){return $[e]}(a);o&&(p=!0);var s=function(e){return V[e]}(a),l=function(e){return q[e]}(a);l&&(i.push(Re(function(e){return{message:"Set units to "+Ge[e]+".",code:e,severity:ce,type:ge}}(a),r)),m.push(l()));var v=function(e){return K[e]}(a);v&&h.push(v(u));var M=function(e){return Q[e]}(a);M&&(u[a]=!0),s&&i.push(Re(Ie(a),r)),l||s||M||v||n||(u[e[0]]=e[1],"G"!==e[0]&&"M"!==e[0]||i.push(Re(function(e){return{message:"Unrecognized G or M code: "+e,severity:le,type:"UNRECOGNIZED",code:e}}(a),r)))}));var v=a[1];0===o.length&&["X","Y","Z","A","B","C","I","J","K"].reduce((function(e,t){return e||void 0!==u[t]}),!1)&&(h.push(ee(u)),v=!0),v||h.push(D.machineState.motion.nonMotionCommand()),d&&"undefined"!==typeof u.H&&(u.H!==Math.floor(u.H)&&(u.H=Math.floor(u.H),i.push(Re(Se(u.H),r))),u.H>55&&i.push(Re(Ze(),r))),m.forEach((function(e){n.store.dispatch(e)}));var g=n.store.getState(),y=n.store.getState().units;if(e.startsWith("(")){var S=e.match(/T(\d+)/);if(S){var Z=parseInt(S[1]),E=e.toLowerCase(),x=E.includes("facemill"),T=E.includes("ball"),I=E.includes("engraver"),b=x?"NONE":"SOLO"===g.machine?"HOLDER1":"LONG";h.push(Y.machineState.tool.table.setTool({P:Z,holder:b,type:T?"BALL":I?"ENGRAVE":"FLAT"}))}}u.units=y,u.machineState=g;var G=h.find((function(e){return e.type===j.machineState.feedRateMode.setInverseTime.toString()||e.type===j.machineState.feedRateMode.setUnitsPerMinute.toString()||e.type===j.machineState.feedRateMode.setUnitsPerRevolution.toString()})),R=c.find((function(e){var t=(0,M.Z)(e,2),n=t[0],i=t[1];return n===w.machineState.feedRate.set&&parseFloat(i)>We})),_=h.find((function(e){return e.type===D.machineState.motion.linear.toString()||e.type===D.machineState.motion.arcCW.toString()||e.type===D.machineState.motion.arcCCW.toString()}));G&&!R&&_&&i.push(Re({message:"When changing feed rate modes (G93,G94,G95) and performing a feed rate move on the same line, a feed rate must be specified as the feed rate is reset to 0.",severity:le,type:"FEED_RATE_MODE_RESETS_FEED_RATE"},r)),(g.feedRateMode===Ce||G)&&n.store.dispatch(w.machineState.feedRate.set(0)),c.forEach((function(e){var t=(0,M.Z)(e,2),i=t[0],r=t[1];n.store.dispatch(i(r))})),h.forEach((function(e){n.store.dispatch(e)}));var P,L,N=n.store.getState();if(v){var k=Xn[N.machine];i.push.apply(i,(0,A.Z)(k.getLimitErrors(N.joints,k.limits).map((function(e){return Re(e,r)}))))}if(N.motion.mode===re||N.motion.mode===ae){u.R&&i.push(Re({message:"Radius Format Arcs are not recommended. Consider using Center Format Arcs instead.",type:"RADIUS_FORMAT_ARC",severity:ue},r));var B=zn(g.motion.position,N.motion.position,N.planeSelect,N.motion.mode),U=B.r0,X=B.r1,F=Math.abs(U-X);F>.05&&i.push(Re(ye(U,X),r)),F>.005&&(F>.001*U||F>.001*X)&&i.push(Re(ye(U,X),r))}if(f&&i.push(Re(function(e,t,n,i){var r=be[e],a=be[t];return{message:"Computed dynamic work offsets for "+r+" (WCS "+e+") from "+a+" (WCS "+t+").\n"+i.map((function(e){return e+": "+n[e].toFixed(4)})).join("\n"),code:r,wcs:e,currentWcs:t,currentCode:a,computedOffsets:n,severity:ce,type:Me}}(u.P,N.motion.g5x.index,N.motion.g5x.offsets[u.P],Xn[N.machine].jointLabels),r)),p&&i.push(Re(function(e,t,n){var i=be[e];return{message:"Set work coordinate system to "+i+" (WCS "+e+").\n"+n.map((function(e){return e+": "+t[e].toFixed(4)})).join("\n"),code:i,wcs:e,workOffsets:t,labelOrder:n,severity:ce,type:ve}}(N.motion.g5x.index,N.motion.g5x.offsets[N.motion.g5x.index],Xn[N.machine].jointLabels),r)),d){var W=N.tool,H=W.loaded,z=H;"undefined"!==typeof u.H&&u.H>0&&(z=u.H),z=Math.min(z,55),i.push(Re(function(e,t,n,i){return{message:"Set tool length offset to "+t.toFixed(4)+" which is what is stored under tool "+e+".",toolNumber:e,toolLengthOffset:t,toolDiameter:n,toolHolder:i,severity:ce,type:pe}}(z,W.toolLengthOffset.Z,2*W.toolLengthOffset.R,W.toolLengthOffset.holder),r)),H!==z&&i.push(Re({message:"Tool specified by G43, T"+(P=z)+", differs from last tool loaded with M6, T"+(L=H)+". The simulator uses the last tool loaded with M6 to determine which tool to show, so your tool path may vary from what you would expect.",g43ToolNum:P,m6ToolNum:L,severity:ue,type:"TOOL_LENGTH_OFFSET_COMMAND_DIFFERS_FROM_LOADED_TOOL"},r))}return N.motion.issuedMotionCommand&&N.motion.mode!==ne&&N.feedRate<We&&(i.push(Re({message:"Feed rate must be greater than 0 for linear or arc moves.",severity:le,type:"ZERO_FEED_RATE"},r)),N.feedRateMode===Ce&&i.push(Re({message:"When in inverse time mode (G93), a feed rate must be specified on every feed rate move.",severity:le,type:fe},r)),g.feedRateMode===Ce&&N.feedRateMode===Le&&i.push(Re({message:"When changing from inverse time mode (G93) to units per minute mode (G94), a feed rate must be specified as inverse time mode resets the feed rate to 0 after every motion move.",severity:le,type:fe},r))),N};var i=t.machineState;this.store=(0,Wn.MT)(Ai,i)}));function Ji(e,t,n,i,r,a){var o=Xn[n.machine],s=t.joints,l=n.joints,u=t.motion.position,c=n.motion.position,m=n.motion.turns,h=n.motion.mode,d=n.planeSelect,f=s,p=l,v=n,M=o.kinematics.forwardKinematics((0,T.Z)((0,T.Z)({},v),{},{joints:f})),g=v.motion.position,y=v.kinematicsMode,S=Math.abs(p[3]-f[3]),Z=Math.abs(p[4]-f[4]);if((S>We||Z>We)&&y!==oe||h!==ne&&h!==ie){var E=.1,x=40,I=!0,b=[];if(h!==ne&&h!==ie||!(Z>-We||S>-We)){if(h===re||h===ae){var G=Vn(u,c,d,h,m),R=zn(u,c,d).r1;x=Math.max(Math.ceil(G/E),Math.ceil(G/R*180/Math.PI/5),5)}}else{var A=Math.max(p[0],f[0]),_=Math.max(p[1],f[1]),P=Math.max(o.toolLength(-p[2]),o.toolLength(-f[2])),O=Math.sqrt(A*A+P*P),C=Math.sqrt(_*_+P*P),L=S*Math.PI/180*C,j=Z*Math.PI/180*O;x=Math.max(Math.ceil(j/E),Math.ceil(L/C*180/Math.PI/5),Math.ceil(j/O*180/Math.PI/5),Math.ceil(L/E),5)}for(;I;){for(var w=0,N=void 0,k=0;k<x;k++){var B=k/(x-1),D=i-r+B*r,U=void 0;U=0===B?.01/r:-.01/r;var X=n.motion.turns,F=qn(h,M,g,B,d,X,!0),Y=qn(h,M,g,B+U,d,X,!0),W=o.kinematics.inverseKinematics((0,T.Z)((0,T.Z)({},v),{},{motion:(0,T.Z)((0,T.Z)({},v.motion),{},{position:F})})),H=o.kinematics.inverseKinematics((0,T.Z)((0,T.Z)({},v),{},{motion:(0,T.Z)((0,T.Z)({},v.motion),{},{position:Y})})),V=o.workPieceSpace(W,Wi(v).Z),z=o.toolOrientation(W),K=o.workPieceSpace(H,Wi(v).Z),q=[V.X,V.Y,V.Z],J=[K.X,K.Y,K.Z],Q=[z.X,z.Y,z.Z],$=void 0;if(U>0){var ee=J[0]-q[0],te=J[1]-q[1],se=J[2]-q[2];$=Math.sqrt(ee*ee+te*te+se*se)/.01}else{var le=q[0]-J[0],ue=q[1]-J[1],ce=q[2]-J[2];$=Math.sqrt(le*le+ue*ue+ce*ce)/.01}if(h===ne?b.push({position:q,color:Vi,speed:$,time:D,line:a,normal:Q,colorIndex:0}):b.push({position:q,color:zi,speed:$,time:D,line:a,normal:Q,colorIndex:1}),k>0){var me=q[0]-N[0],he=q[1]-N[1],de=q[2]-N[2],fe=Math.sqrt(me*me+he*he+de*de);w=Math.max(w,fe)}N=q}w>.15000000000000002?(x=Math.ceil(x*w/E),b=[]):I=!1}for(var pe=0;pe<b.length;pe++)e.push(b[pe])}else{var ve=t.tool.loaded,Me=n.tool.loaded,ge=0===ve?-o.toolLength(0):Wi(t).Z,ye=0===Me?-o.toolLength(0):Wi(n).Z,Se=o.workPieceSpace(s,ge),Ze=o.workPieceSpace(l,ye),Ee=o.toolOrientation(s),xe=o.toolOrientation(l),Te=Ee.X,Ie=Ee.Y,be=Ee.Z,Ge=xe.X,Re=xe.Y,Ae=xe.Z,_e=Se.X,Pe=Se.Y,Oe=Se.Z,Ce=Ze.X,Le=Ze.Y,je=Ze.Z,we=Ce-_e,Ne=Le-Pe,ke=je-Oe,Be=Math.sqrt(we*we+Ne*Ne+ke*ke)/r;switch(h){case ne:e.push({position:[_e,Pe,Oe],color:Vi,speed:Be,time:i-r,line:a,normal:[Te,Ie,be],colorIndex:0}),e.push({position:[Ce,Le,je],color:Vi,speed:Be,time:i,line:a,normal:[Ge,Re,Ae],colorIndex:0});break;case ie:e.push({position:[_e,Pe,Oe],color:zi,speed:Be,time:i-r,line:a,normal:[Te,Ie,be],colorIndex:1}),e.push({position:[Ce,Le,je],color:zi,speed:Be,time:i,line:a,normal:[Ge,Re,Ae],colorIndex:1});break;default:console.error("shouldn't get here")}}}function Qi(e,t,n,i){var r=Xn[t.machine],a=e.joints,o=t.joints,s=e.motion.position,l=t.motion.position;if(t.motion.issuedMotionCommand){var u=t.motion.turns,c=t.motion.mode,m=t.planeSelect,h=t.units,d=.001,f=t.feedRate,p=t.feedRate,v=t.feedRateMode;if(h===Fe&&(p/=25.4),c!==ne)if(v===Ce)f>=We&&(d=1/f*60);else if(v===Le)if(c===ie){if(p>=We){for(var M=0,g=0;g<3;g++){var y=Math.abs(o[g]-a[g]);M=Math.max(M,y),d=Math.max(d,y/p*60)}if(M>-We&&M<We)for(var S=3;S<a.length;S++){var Z=Math.abs(o[S]-a[S]);d=Math.max(d,Z/f*60)}}}else if(c===re||c===ae){if(p>=We)d=Vn(s,l,m,c,u)/p*60}else d=0;else d=3;for(var E=r.limits.velocities,x=r.limits.accelerations,T=0,I=3;I<a.length;I++){var b=Math.abs(o[I]-a[I]);T=Math.max(b,T)}for(var G=0;G<a.length;G++){var R=E[G]*E[G]/(.5*x[G]),A=Math.abs(o[G]-a[G]);if(A>We){var _=0;_=T<We&&T>-We?A/E[G]:A>=R?Math.max(A-R)/E[G]+2*E[G]/(.5*x[G]):Math.sqrt(A/x[G]),d=Math.max(d,_)}}return d}return n.indexOf("M999")>-1?2:0}var $i=n(5321);function er(e){return"%"===e}function tr(e){var t=e.replace(/^N\d+\s*/,"");return t.startsWith("(")&&t.endsWith(")")||t.startsWith(";")}function nr(e){return ir.apply(this,arguments)}function ir(){return(ir=(0,E.Z)((0,y.Z)().mark((function e(t){var n,i;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,65536,i=(0,y.Z)().mark((function e(){var i,r;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.slice(n,Math.min(n+65536,t.size)),e.next=3,(0,Z.Z)(new Promise((function(e,t){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=t,n.readAsArrayBuffer(i)})));case 3:return r=e.sent,e.next=6,new Uint8Array(r);case 6:n+=65536;case 7:case"end":return e.stop()}}),e)}));case 3:if(!(n<t.size)){e.next=7;break}return e.delegateYield(i(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){return ar.apply(this,arguments)}function ar(){return(ar=(0,E.Z)((0,y.Z)().mark((function e(t){var n,i,r,a,o,s,l,u,c,m,h,d,f,p,v,E,x,T,I,b,A,_,P,O,C,L,j;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new TextDecoder,i=null,!Array.isArray(t)){e.next=14;break}return e.next=5,Math.max(Math.min(Math.ceil(t.length/R),G),1);case 5:r=0;case 6:if(!(r<t.length)){e.next=12;break}return e.next=9,{line:t[r],progress:r/(t.length-1)*100};case 9:r++,e.next=6;break;case 12:e.next=113;break;case 14:if(a=0,o=1e5,!(t instanceof File)){e.next=21;break}o=t.size,i=nr(t),e.next=47;break;case 21:if(!t.url){e.next=46;break}return e.next=24,(0,Z.Z)(fetch(t.url));case 24:s=e.sent,l=(0,g.Z)(s.headers),e.prev=26,l.s();case 28:if((u=l.n()).done){e.next=35;break}if(c=(0,M.Z)(u.value,2),m=c[0],h=c[1],"content-length"!==m.toLowerCase()){e.next=33;break}return o=parseInt(h),e.abrupt("break",35);case 33:e.next=28;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(26),l.e(e.t0);case 40:return e.prev=40,l.f(),e.finish(40);case 43:i=(0,$i.Z)(s.body.getReader()),e.next=47;break;case 46:"string"===typeof t?(d=new TextEncoder,f=d.encode(t),o=f.length,i=[f]):t.byteLength&&(o=t.byteLength,i=[new Uint8Array(t)]);case 47:return p=o/53,e.next=50,Math.max(Math.min(Math.ceil(p/R),G),1);case 50:v=new Uint8Array(0),E=!1,x=!1,e.prev=53,I=(0,S.Z)(i);case 55:return e.next=57,(0,Z.Z)(I.next());case 57:if(!(E=!(b=e.sent).done)){e.next=97;break}if(A=b.value,_=0,!((P=A.indexOf(10))>-1)){e.next=90;break}if(!(v.length>0)){e.next=71;break}return(O=new Uint8Array(v.length+P)).set(v),O.set(A.subarray(0,P),v.length),a+=O.length+1,e.next=69,{line:n.decode(O).replace(/\r/,""),progress:a/o*100};case 69:e.next=75;break;case 71:return C=A.subarray(_,P),a+=C.length+1,e.next=75,{line:n.decode(C).replace(/\r/,""),progress:a/o*100};case 75:if(!(P>-1)){e.next=88;break}if(_=P+1,!((P=A.indexOf(10,_))>-1)){e.next=85;break}return L=A.subarray(_,P),a+=L.length+1,e.next=83,{line:n.decode(L).replace(/\r/,""),progress:a/o*100};case 83:e.next=86;break;case 85:v=A.subarray(_);case 86:e.next=75;break;case 88:e.next=94;break;case 90:(j=new Uint8Array(v.length+A.length)).set(v),j.set(A,v.length),v=j;case 94:E=!1,e.next=55;break;case 97:e.next=103;break;case 99:e.prev=99,e.t1=e.catch(53),x=!0,T=e.t1;case 103:if(e.prev=103,e.prev=104,!E||null==I.return){e.next=108;break}return e.next=108,(0,Z.Z)(I.return());case 108:if(e.prev=108,!x){e.next=111;break}throw T;case 111:return e.finish(108);case 112:return e.finish(103);case 113:case"end":return e.stop()}}),e,null,[[26,37,40,43],[53,99,103,113],[104,,108,112]])})))).apply(this,arguments)}self.onmessage=function(){var e=(0,v.Z)((0,y.Z)().mark((function e(t){var n,i,r,a,o,s,l,u,c,m,h,d,f,p,v,M,g,Z,E,x,T,I,b,G,R,A,_,P,O,C;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=n.machineState,r=n.file,a=rr(r),o=new qi({machineState:i}),s=[],l=[],u=[],c=[],m=[],h=[0],e.next=11,a.next();case 11:d=e.sent.value,f=0,p=0,v=i,M=!0,g=!1,Z=50,E=1e3,x=!1,T=!1,e.prev=21,b=(0,S.Z)(a);case 23:return e.next=25,b.next();case 25:if(!(x=!(G=e.sent).done)){e.next=43;break}R=G.value,A=R.line,_=R.progress,P=o.interpret(A,u,p),O=Qi(v,P,A),C=tr(A)||er(A),f+=O,m.push(A),l.push(f),!M&&C&&h.push(p),M=C,p%d===0&&s.push(P),P.motion.issuedMotionCommand&&Ji(c,v,P,f,O,p),(!g&&m.length>=Z||m.length>E)&&(g=!0,self.postMessage({progress:_,lines:m,states:s,times:l,toolPaths:h,messages:u,points:c,linesPerIndex:d}),m=[],s=[],l=[],u=[],c=[],h=[]),v=P,p++;case 40:x=!1,e.next=23;break;case 43:e.next=49;break;case 45:e.prev=45,e.t0=e.catch(21),T=!0,I=e.t0;case 49:if(e.prev=49,e.prev=50,!x||null==b.return){e.next=54;break}return e.next=54,b.return();case 54:if(e.prev=54,!T){e.next=57;break}throw I;case 57:return e.finish(54);case 58:return e.finish(49);case 59:m.length>0&&self.postMessage({progress:100,lines:m,states:s,times:l,toolPaths:h,messages:u,points:c,linesPerIndex:d}),self.close();case 61:case"end":return e.stop()}}),e,null,[[21,45,49,59],[50,,54,58]])})));return function(t){return e.apply(this,arguments)}}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.x=function(){var e=n.O(void 0,[838],(function(){return n(4888)}));return e=n.O(e)},function(){var e=[];n.O=function(t,i,r,a){if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],r=e[c][1],a=e[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,r,a]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".3391fd5d.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={888:1};n.f.i=function(t,i){e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkpenta_ui=self.webpackChunkpenta_ui||[],i=t.push.bind(t);t.push=function(t){var r=t[0],a=t[1],o=t[2];for(var s in a)n.o(a,s)&&(n.m[s]=a[s]);for(o&&o(n);r.length;)e[r.pop()]=1;i(t)}}(),function(){var e=n.x;n.x=function(){return n.e(838).then(e)}}();n.x()}();
//# sourceMappingURL=888.d6821cc2.chunk.js.map